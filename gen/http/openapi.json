{"swagger":"2.0","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":""},"host":"localhost:8080","consumes":["application/json","application/xml","application/gob"],"produces":["application/json","application/xml","application/gob"],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"type":"string"},{"name":"AddRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinBrokerAddRequestBody","required":["resource","action"]}}],"responses":{"200":{"description":"OK response.","schema":{"type":"string"}}},"schemes":["http"]}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","parameters":[{"name":"CompleteRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinBrokerCompleteRequestBody","required":["id","status"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/create":{"post":{"tags":["spin-registry"],"summary":"create spin-registry","description":"Create a VM","operationId":"spin-registry#create","parameters":[{"name":"CreateRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinRegistryCreateRequestBody","required":["name","cpus","memory","storage"]}}],"responses":{"200":{"description":"OK response.","schema":{"type":"integer","format":"int64"}}},"schemes":["http"]}},"/delete/{id}":{"post":{"tags":["spin-registry"],"summary":"delete spin-registry","description":"Delete a VM by ID","operationId":"spin-registry#delete","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"type":"integer"}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"type":"array","items":{"type":"string","example":"Deleniti illum quod est enim aperiam laborum."}}}},"schemes":["http"]}},"/get/{id}":{"get":{"tags":["spin-registry"],"summary":"get spin-registry","description":"Retrieve a VM by ID","operationId":"spin-registry#get","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"type":"integer"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/SpinRegistryGetResponseBody","required":["name","cpus","memory","storage"]}}},"schemes":["http"]}},"/list":{"get":{"tags":["spin-registry"],"summary":"list spin-registry","description":"Retrieve all VM IDs","operationId":"spin-registry#list","responses":{"200":{"description":"OK response.","schema":{"type":"array","items":{"type":"integer","example":6184685942829101060,"format":"int64"}}}},"schemes":["http"]}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","schema":{"type":"string"}}},"schemes":["http"]}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/SpinBrokerNextResponseBody","required":["uuid","resource","action"]}},"400":{"description":"No records were found","schema":{"$ref":"#/definitions/SpinBrokerNextRecordNotFoundResponseBody"}}},"schemes":["http"]}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/SpinBrokerStatusResponseBody","required":["status"]}},"400":{"description":"No records were found","schema":{"$ref":"#/definitions/SpinBrokerStatusRecordNotFoundResponseBody"}}},"schemes":["http"]}},"/storage/volume/add":{"post":{"tags":["spin-apiserver"],"summary":"add_volume spin-apiserver","description":"Add a volume for image allocation with backing storage, and name it","operationId":"spin-apiserver#add_volume","parameters":[{"name":"add_volume_request_body","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinApiserverAddVolumeRequestBody","required":["volume","path"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/image/create":{"post":{"tags":["spin-apiserver"],"summary":"create_image_on_volume spin-apiserver","description":"Create an image on a volume","operationId":"spin-apiserver#create_image_on_volume","parameters":[{"name":"create_image_on_volume_request_body","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinApiserverCreateImageOnVolumeRequestBody","required":["image_name","image_size","volume"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/image/delete":{"post":{"tags":["spin-apiserver"],"summary":"delete_image_on_volume spin-apiserver","description":"Delete an image on a volume","operationId":"spin-apiserver#delete_image_on_volume","parameters":[{"name":"delete_image_on_volume_request_body","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinApiserverDeleteImageOnVolumeRequestBody","required":["image_name","volume"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/image/info/{volume}/{image_name}":{"get":{"tags":["spin-apiserver"],"summary":"info_image_on_volume spin-apiserver","description":"Obtain information on an image","operationId":"spin-apiserver#info_image_on_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"type":"string"},{"name":"image_name","in":"path","description":"image name","required":true,"type":"string"}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/image/move":{"post":{"tags":["spin-apiserver"],"summary":"move_image spin-apiserver","description":"Move an image from one volume to another","operationId":"spin-apiserver#move_image","parameters":[{"name":"move_image_request_body","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinApiserverMoveImageRequestBody","required":["image_name","volume","target_volume"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/image/resize":{"post":{"tags":["spin-apiserver"],"summary":"resize_image_on_volume spin-apiserver","description":"Resize an image on a volume","operationId":"spin-apiserver#resize_image_on_volume","parameters":[{"name":"resize_image_on_volume_request_body","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinApiserverResizeImageOnVolumeRequestBody","required":["image_name","image_size","volume"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/info/{volume}":{"get":{"tags":["spin-apiserver"],"summary":"info_volume spin-apiserver","description":"Get information on a volume","operationId":"spin-apiserver#info_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"type":"string"}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/label/{volume}/{label}":{"post":{"tags":["spin-apiserver"],"summary":"label_volume spin-apiserver","description":"Apply a label to a volume.","operationId":"spin-apiserver#label_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"type":"string"},{"name":"label","in":"path","description":"label identifier to apply to volume","required":true,"type":"string"}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/storage/volume/remove/{volume}":{"post":{"tags":["spin-apiserver"],"summary":"remove_volume spin-apiserver","description":"Remove a volume. Requires all images to be removed.","operationId":"spin-apiserver#remove_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"type":"string"}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}},"/update/{id}":{"post":{"tags":["spin-registry"],"summary":"update spin-registry","description":"Update a VM","operationId":"spin-registry#update","parameters":[{"name":"id","in":"path","description":"ID of VM to update","required":true,"type":"integer"},{"name":"UpdateRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/SpinRegistryUpdateRequestBody","required":["vm"]}}],"responses":{"200":{"description":"OK response."}},"schemes":["http"]}}},"definitions":{"SpinApiserverAddVolumeRequestBody":{"title":"SpinApiserverAddVolumeRequestBody","type":"object","properties":{"path":{"type":"string","description":"path to backing storage","example":"Rerum asperiores corporis aut."},"volume":{"type":"string","description":"volume identifier","example":"Quis quidem nulla."}},"example":{"path":"Quia reprehenderit vitae.","volume":"In ipsa enim non maxime est."},"required":["volume","path"]},"SpinApiserverCreateImageOnVolumeRequestBody":{"title":"SpinApiserverCreateImageOnVolumeRequestBody","type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Aut adipisci."},"image_size":{"type":"integer","description":"image size in GB","example":10642461641015261973,"format":"int64"},"volume":{"type":"string","description":"volume identifier","example":"Et id et alias vel ratione."}},"example":{"image_name":"Cupiditate veniam atque accusamus.","image_size":6462753351380853695,"volume":"Ipsa at."},"required":["image_name","image_size","volume"]},"SpinApiserverDeleteImageOnVolumeRequestBody":{"title":"SpinApiserverDeleteImageOnVolumeRequestBody","type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Aliquam sit necessitatibus pariatur quam."},"volume":{"type":"string","description":"volume identifier","example":"Velit ut ea excepturi."}},"example":{"image_name":"Facilis ad quod.","volume":"Quia facere."},"required":["image_name","volume"]},"SpinApiserverMoveImageRequestBody":{"title":"SpinApiserverMoveImageRequestBody","type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Tempore voluptate voluptas."},"target_volume":{"type":"string","description":"volume identifier to move to","example":"Ut nulla et cum consequatur in."},"volume":{"type":"string","description":"volume identifier","example":"Mollitia eius hic."}},"example":{"image_name":"Iure qui voluptas.","target_volume":"Qui laborum.","volume":"Nostrum qui perferendis rerum molestias."},"required":["image_name","volume","target_volume"]},"SpinApiserverResizeImageOnVolumeRequestBody":{"title":"SpinApiserverResizeImageOnVolumeRequestBody","type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Sunt nesciunt natus dolorem."},"image_size":{"type":"integer","description":"new image size; must be larger than original size","example":6793360970585482452,"format":"int64"},"volume":{"type":"string","description":"volume identifier","example":"Tempora est optio."}},"example":{"image_name":"Aut quis vel officia.","image_size":3325076449328112023,"volume":"Incidunt tempora temporibus sed quae ea."},"required":["image_name","image_size","volume"]},"SpinBrokerAddRequestBody":{"title":"SpinBrokerAddRequestBody","type":"object","properties":{"action":{"type":"string","description":"Action name","example":"Laboriosam sapiente ut sint officia quod."},"parameters":{"type":"object","description":"Action parameters","example":{"Ipsam dicta accusantium.":"In ea natus tempore.","Laudantium consectetur assumenda soluta.":"Eaque neque.","Ut in impedit.":"Et dolorum tempora inventore officia."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Qui provident."}},"example":{"action":"Molestiae quaerat.","parameters":{"Aut sit a quas velit.":"Rerum illo ratione totam quia.","Autem ab delectus.":"Magnam ex natus dicta aliquid sint.","Sint ut facilis nobis quo.":"Iusto non quae."},"resource":"Accusamus beatae nihil."},"required":["resource","action"]},"SpinBrokerCompleteRequestBody":{"title":"SpinBrokerCompleteRequestBody","type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Sit nihil libero libero commodi placeat exercitationem."},"status":{"type":"boolean","description":"status of work","example":false},"status_reason":{"type":"string","description":"reason of success/failure","example":"Totam quasi eligendi quod voluptas."}},"example":{"id":"Cum sequi voluptatem culpa unde ut.","status":false,"status_reason":"Ut illum nulla repudiandae eos."},"required":["id","status"]},"SpinBrokerNextRecordNotFoundResponseBody":{"title":"Mediatype identifier: application/vnd.goa.error; view=default","type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":false},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":true}},"description":"next_record_not_found_response_body result type (default view)","example":{"fault":true,"id":"123abc","message":"parameter 'p' must be an integer","name":"bad_request","temporary":true,"timeout":true},"required":["name","id","message","temporary","timeout","fault"]},"SpinBrokerNextResponseBody":{"title":"SpinBrokerNextResponseBody","type":"object","properties":{"action":{"type":"string","description":"action name","example":"Laboriosam fugit."},"parameters":{"type":"object","description":"Action parameters","example":{"Non voluptate est.":"Consectetur nihil omnis.","Odio similique qui qui architecto.":"Nemo omnis quia deleniti voluptate.","Quia ut laboriosam beatae itaque omnis.":"Exercitationem incidunt quae est velit eaque mollitia."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"Enim quos numquam recusandae ut."},"uuid":{"type":"string","description":"Command ID","example":"Accusantium laboriosam sunt minima saepe architecto."}},"example":{"action":"Enim ut voluptas ullam quas aliquam.","parameters":{"Illo molestiae dolor cupiditate perspiciatis voluptas.":"Voluptatem adipisci et provident."},"resource":"Et vel.","uuid":"Ea qui omnis qui."},"required":["uuid","resource","action"]},"SpinBrokerStatusRecordNotFoundResponseBody":{"title":"Mediatype identifier: application/vnd.goa.error; view=default","type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":true},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":false}},"description":"status_record_not_found_response_body result type (default view)","example":{"fault":true,"id":"123abc","message":"parameter 'p' must be an integer","name":"bad_request","temporary":false,"timeout":false},"required":["name","id","message","temporary","timeout","fault"]},"SpinBrokerStatusResponseBody":{"title":"SpinBrokerStatusResponseBody","type":"object","properties":{"causer":{"type":"string","description":"Failure causer as UUID (if any)","example":"Ipsum ea deleniti."},"reason":{"type":"string","description":"Failure reason (if any)","example":"Dolores atque excepturi ut."},"status":{"type":"boolean","description":"Pass/Fail status","example":false}},"example":{"causer":"Molestiae quod distinctio.","reason":"Autem doloribus sunt ut quos odio ut.","status":true},"required":["status"]},"SpinRegistryCreateRequestBody":{"title":"SpinRegistryCreateRequestBody","type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":13654993227678912479,"format":"int64"},"memory":{"type":"integer","description":"Memory (in megabytes)","example":17170428336381239599,"format":"int64"},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Quibusdam error dolorem."},"storage":{"type":"array","items":{"$ref":"#/definitions/StorageRequestBody"},"description":"Storage references","example":[{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."}]}},"example":{"cpus":16371545999011268138,"memory":15145889332214776877,"name":"Voluptatem qui explicabo quaerat officiis voluptatum deleniti.","storage":[{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."}]},"required":["name","cpus","memory","storage"]},"SpinRegistryGetResponseBody":{"title":"SpinRegistryGetResponseBody","type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":2591967222747619247,"format":"int64"},"memory":{"type":"integer","description":"Memory (in megabytes)","example":3286436954421689110,"format":"int64"},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Itaque ducimus qui recusandae aliquid blanditiis repudiandae."},"storage":{"type":"array","items":{"$ref":"#/definitions/StorageResponseBody"},"description":"Storage references","example":[{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."},{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."},{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."},{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."}]}},"example":{"cpus":4099979743360283536,"memory":5173812223221144089,"name":"Inventore cupiditate commodi aut asperiores quidem sit.","storage":[{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."},{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."},{"cdrom":false,"image":"Soluta vel.","image_size":2014425556641484725,"volume":"Iste expedita a aut similique corrupti."}]},"required":["name","cpus","memory","storage"]},"SpinRegistryUpdateRequestBody":{"title":"SpinRegistryUpdateRequestBody","type":"object","properties":{"vm":{"$ref":"#/definitions/VMRequestBody"}},"example":{"vm":{"cpus":11176502060165847513,"memory":15107782813490131477,"name":"Quia non nihil vitae nesciunt.","storage":[{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."}]}},"required":["vm"]},"StorageRequestBody":{"title":"StorageRequestBody","type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this image a cdrom?","example":true},"image":{"type":"string","description":"Image filename, must not include `/`","example":"Animi saepe."},"image_size":{"type":"integer","description":"Image size (in gigabytes)","example":6325199792409648331,"format":"int64"},"volume":{"type":"string","description":"Volume name, must not include `/`","example":"Impedit autem optio ut quidem numquam provident."}},"example":{"cdrom":false,"image":"Officia voluptas voluptate.","image_size":6479444625026069939,"volume":"Veritatis quos reiciendis et quisquam."},"required":["volume","image"]},"StorageResponseBody":{"title":"StorageResponseBody","type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this image a cdrom?","example":true},"image":{"type":"string","description":"Image filename, must not include `/`","example":"Molestias deserunt dicta eaque reiciendis autem exercitationem."},"image_size":{"type":"integer","description":"Image size (in gigabytes)","example":3209690071918089088,"format":"int64"},"volume":{"type":"string","description":"Volume name, must not include `/`","example":"Voluptas et inventore."}},"example":{"cdrom":true,"image":"In inventore.","image_size":1204504054380391946,"volume":"Qui repellendus voluptate voluptas."},"required":["volume","image"]},"VMRequestBody":{"title":"VMRequestBody","type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":2802966637285714696,"format":"int64"},"memory":{"type":"integer","description":"Memory (in megabytes)","example":9195914643071085458,"format":"int64"},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Sed qui sint delectus quis."},"storage":{"type":"array","items":{"$ref":"#/definitions/StorageRequestBody"},"description":"Storage references","example":[{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."}]}},"example":{"cpus":5403544277777148000,"memory":9819878344929341869,"name":"Molestiae nihil tempora.","storage":[{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."},{"cdrom":true,"image":"Corrupti et voluptatibus et et occaecati.","image_size":8308809769684407427,"volume":"Qui error modi magni."}]},"required":["name","cpus","memory","storage"]}}}