{"openapi":"3.0.3","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Earum nisi sed."},"example":"Quibusdam non neque magnam."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRequestBody"},"example":{"action":"Ad ut nulla laboriosam non deserunt vitae.","dependencies":["Porro fugiat ex consequatur provident dignissimos.","Possimus velit quod sit.","Mollitia natus temporibus fugit occaecati ipsum qui."],"parameters":{"Id et autem ut debitis.":"Saepe occaecati impedit quas laborum.","Quaerat itaque aut.":"Voluptatem quibusdam dolor.","Sint ducimus ullam odio.":"Aliquid consequatur atque quam neque."},"resource":"Ullam amet magnam."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Quos maxime ut error facilis modi autem."},"example":"Est ea."}}}}}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteRequestBody"},"example":{"id":"Cum delectus occaecati enim in.","status":true,"status_reason":"Amet quia quis omnis suscipit."}}}},"responses":{"200":{"description":"OK response."}}}},"/control/shutdown/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_shutdown spin-apiserver","operationId":"spin-apiserver#control_shutdown","parameters":[{"name":"id","in":"path","description":"ID of VM to shutdown","required":true,"schema":{"type":"integer","description":"ID of VM to shutdown","example":2103949561816007462},"example":17970882761446779996}],"responses":{"200":{"description":"OK response."}}}},"/control/start/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_start spin-apiserver","operationId":"spin-apiserver#control_start","parameters":[{"name":"id","in":"path","description":"ID of VM to start","required":true,"schema":{"type":"integer","description":"ID of VM to start","example":2184803700749897776},"example":7980892859187054070}],"responses":{"200":{"description":"OK response."}}}},"/control/stop/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_stop spin-apiserver","operationId":"spin-apiserver#control_stop","parameters":[{"name":"id","in":"path","description":"ID of VM to stop","required":true,"schema":{"type":"integer","description":"ID of VM to stop","example":690719096842054834},"example":5816977068149458459}],"responses":{"200":{"description":"OK response."}}}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Veniam ut voluptatibus modi quo est."},"example":"Ut vitae a non illum modi."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Corporis nam."},"example":["Modi qui voluptatem placeat rem.","Dolore ea at ut veritatis expedita voluptatem."]},"example":["Quia temporibus nam ex incidunt.","Est omnis perferendis quia veritatis."]}}}}}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Adipisci tempora."},"example":"Dignissimos ullam sint fugit rem totam est."}}}}}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"schema":{"type":"string","description":"resource type","example":"Sit dolores sunt repudiandae quas assumenda voluptatem."},"example":"Et dolores."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextResponseBody"},"example":{"action":"Provident sint.","parameters":{"Minus facere animi quas tempora nisi aperiam.":"Deserunt qui praesentium temporibus esse.","Qui molestias eum voluptatem qui nihil.":"Aspernatur vel vel illum voluptatem voluptatibus est."},"resource":"Corporis sit non sit recusandae eum repellat.","uuid":"Unde inventore cupiditate soluta."}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Est illo."},"example":"Cumque ab officiis veniam et."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponseBody"},"example":{"causer":"Neque reiciendis ipsum.","reason":"Repellendus eaque nesciunt quia.","status":false}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/storage/images/create":{"post":{"tags":["spin-registry"],"summary":"storage_images_create spin-registry","description":"add an image definition to the registry","operationId":"spin-registry#storage_images_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Storage"},"example":{"cdrom":true,"image":"Nostrum qui perferendis rerum molestias.","image_size":11387401285549308839,"volume":"Iure qui voluptas."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Image"},"example":{"cdrom":true,"path":"Quia qui provident esse."}}}}}}},"/storage/images/delete":{"post":{"tags":["spin-registry"],"summary":"storage_images_delete spin-registry","description":"remove an image definition from the registry","operationId":"spin-registry#storage_images_delete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesDeleteRequestBody"},"example":{"image_name":"Impedit laboriosam et dolorum tempora inventore officia.","volume_name":"Ut sint officia quod tempora consequatur ut."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/images/get":{"get":{"tags":["spin-registry"],"summary":"storage_images_get spin-registry","description":"retrieves an image definition from the registry","operationId":"spin-registry#storage_images_get","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesDeleteRequestBody"},"example":{"image_name":"In ea natus tempore.","volume_name":"Ipsam dicta accusantium."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Image"},"example":{"cdrom":true,"path":"Laudantium consectetur assumenda soluta."}}}}}}},"/storage/images/list":{"get":{"tags":["spin-registry"],"summary":"storage_images_list spin-registry","description":"list all images by volume","operationId":"spin-registry#storage_images_list","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesListRequestBody"},"example":{"volume_name":"Sunt nesciunt natus dolorem."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Quia vitae facere ducimus esse quaerat."},"example":["Et nostrum.","A fuga mollitia id.","Officiis similique nostrum.","Pariatur cumque iusto sapiente."]},"example":["Autem mollitia facilis distinctio.","A sit nihil voluptas ea ea."]}}}}}},"/storage/volumes/create":{"post":{"tags":["spin-registry"],"summary":"storage_volumes_create spin-registry","description":"create a new volume","operationId":"spin-registry#storage_volumes_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageVolumesCreateRequestBody"},"example":{"name":"Ut ea excepturi.","path":"Facilis ad quod."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volumes/delete":{"post":{"tags":["spin-registry"],"summary":"storage_volumes_delete spin-registry","description":"delete an existing volume","operationId":"spin-registry#storage_volumes_delete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageVolumesDeleteRequestBody"},"example":{"name":"Quia facere."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volumes/list":{"get":{"tags":["spin-registry"],"summary":"storage_volumes_list spin-registry","description":"list all volumes","operationId":"spin-registry#storage_volumes_list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"object","example":{"Aliquam illo dolor sint et asperiores.":"Tempore commodi deserunt et nemo expedita libero.","Id dolor similique.":"Maxime dolorum voluptatibus minus neque.","Quisquam nobis voluptas molestiae sit ullam aut.":"Labore dicta error dolores reprehenderit."},"additionalProperties":true},"example":{"Debitis dolores.":"Animi eligendi dolor."}}}}}}},"/vm/create":{"post":{"tags":["spin-registry"],"summary":"vm_create spin-registry","description":"Create a VM","operationId":"spin-registry#vm_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody2"},"example":{"cpus":16411754489742442442,"images":[{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."}],"memory":17859123006270594178,"name":"Dolore soluta consectetur adipisci quia."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"integer","example":1790785067899035058},"example":8269822299929738958}}}}}},"/vm/delete/{id}":{"post":{"tags":["spin-registry"],"summary":"vm_delete spin-registry","description":"Delete a VM by ID","operationId":"spin-registry#vm_delete","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":7602565543342206846},"example":13821929301539534014}],"responses":{"200":{"description":"OK response."}}}},"/vm/get/{id}":{"get":{"tags":["spin-registry"],"summary":"vm_get spin-registry","description":"Retrieve a VM by ID","operationId":"spin-registry#vm_get","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":9989459902408922925},"example":15696056500231921993}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody2"},"example":{"cpus":14590562928325661118,"images":[{"cdrom":true,"path":"Corrupti ab."},{"cdrom":true,"path":"Corrupti ab."},{"cdrom":true,"path":"Corrupti ab."}],"memory":7638373082656033857,"name":"Vel qui dolores nihil autem dolorem."}}}}}}},"/vm/list":{"get":{"tags":["spin-registry"],"summary":"vm_list spin-registry","description":"Retrieve all VM IDs","operationId":"spin-registry#vm_list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","example":8288848651608623264},"example":[9202509822838510324,2937949108987365914,4387007597452552916,5030323474742448459]},"example":[12227169246022071912,15480435216194929740,15076802870552011670]}}}}}},"/vm/update/{id}":{"post":{"tags":["spin-registry"],"summary":"vm_update spin-registry","description":"Update a VM","operationId":"spin-registry#vm_update","parameters":[{"name":"id","in":"path","description":"ID of VM to update","required":true,"schema":{"type":"integer","description":"ID of VM to update","example":12628878072929394706},"example":9462182494075856820}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMUpdateRequestBody"},"example":{"vm":{"cpus":17043342971635177953,"images":[{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."}],"memory":2551606264180670795,"name":"Rem et nobis."}}}}},"responses":{"200":{"description":"OK response."}}}}},"components":{"schemas":{"AddRequestBody":{"type":"object","properties":{"action":{"type":"string","description":"Action name","example":"In qui eaque omnis odio quia."},"dependencies":{"type":"array","items":{"type":"string","example":"Ut est quia nemo suscipit."},"description":"Dependency UUIDs","example":["Non ut id aut dolores.","Mollitia est aliquam.","Nisi placeat quasi consequatur ut sed."]},"parameters":{"type":"object","description":"Action parameters","example":{"Deleniti autem ex tempora.":"Adipisci aliquid aliquam vel sit sit.","Fuga omnis dignissimos nihil soluta.":"Voluptas quae autem illum enim sequi soluta.","Harum aliquam.":"Dicta dignissimos optio quisquam."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Eligendi id rerum hic."}},"example":{"action":"Sint quo cum fugit facere ea.","dependencies":["Omnis asperiores qui quibusdam odio est nulla.","Molestiae cupiditate neque eos.","Nihil sunt doloremque amet sint ut perspiciatis."],"parameters":{"Commodi nihil error ipsum minima fugit vero.":"In voluptas laborum corrupti magnam quis.","Ea repudiandae illum ut ut optio.":"Dolor doloremque similique.","Veniam iusto sint.":"Voluptatem recusandae unde."},"resource":"Autem ut."},"required":["resource","action"]},"CompleteRequestBody":{"type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Dicta optio voluptatem veniam fugit."},"status":{"type":"boolean","description":"status of work","example":true},"status_reason":{"type":"string","description":"reason of success/failure","example":"Repellat cupiditate odit commodi veniam corrupti."}},"example":{"id":"Consequatur eos aut laborum at.","status":false,"status_reason":"Voluptatem quos inventore aut ratione eaque perferendis."},"required":["id","status"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":true}},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"},"required":["name","id","message","temporary","timeout","fault"]},"Image":{"type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this a cdrom image?","example":false},"path":{"type":"string","description":"Image path","example":"Ex est suscipit."}},"example":{"cdrom":false,"path":"Deleniti distinctio rerum doloremque architecto quia corrupti."},"required":["path","cdrom"]},"NextResponseBody":{"type":"object","properties":{"action":{"type":"string","description":"action name","example":"Minima cum quae voluptas et."},"parameters":{"type":"object","description":"Action parameters","example":{"Corporis occaecati aut adipisci officia.":"Reprehenderit consequuntur inventore.","Et aut omnis reprehenderit dolorum non.":"Voluptate tempora fugit qui doloremque accusantium."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"Odio ea."},"uuid":{"type":"string","description":"Command ID","example":"Architecto in temporibus."}},"example":{"action":"Et et.","parameters":{"Officiis velit hic unde assumenda praesentium.":"Blanditiis eum."},"resource":"Magnam officia quaerat ex vel ipsum.","uuid":"Tempora est delectus et quia."},"required":["uuid","resource","action"]},"StatusResponseBody":{"type":"object","properties":{"causer":{"type":"string","description":"Failure causer as UUID (if any)","example":"Sed iusto quam non ratione fugiat distinctio."},"reason":{"type":"string","description":"Failure reason (if any)","example":"Dicta iusto tenetur qui ipsa et."},"status":{"type":"boolean","description":"Pass/Fail status","example":false}},"example":{"causer":"Repudiandae et vel corporis rerum molestias.","reason":"Temporibus a qui illo.","status":false},"required":["status"]},"Storage":{"type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this image a cdrom?","example":true},"image":{"type":"string","description":"Image filename, no `/` characters","example":"Sed ducimus ratione doloremque molestias enim architecto."},"image_size":{"type":"integer","description":"Image size (in gigabytes)","example":2991777116152129871},"volume":{"type":"string","description":"Volume name","example":"Quisquam odio."}},"example":{"cdrom":true,"image":"Aspernatur illo eligendi.","image_size":5362336180170212837,"volume":"Dolorem quis dolores laborum ut voluptatem sed."},"required":["image","volume"]},"StorageImagesDeleteRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"name of image","example":"Perferendis mollitia."},"volume_name":{"type":"string","description":"name of volume","example":"Molestiae quia eos."}},"example":{"image_name":"Dicta modi.","volume_name":"Officiis quia cum tenetur non occaecati."},"required":["volume_name","image_name"]},"StorageImagesListRequestBody":{"type":"object","properties":{"volume_name":{"type":"string","description":"name of volume to list images for","example":"Voluptatem est molestiae accusamus aperiam."}},"example":{"volume_name":"Voluptatem minima eos."},"required":["volume_name"]},"StorageVolumesCreateRequestBody":{"type":"object","properties":{"name":{"type":"string","description":"name of volume","example":"Omnis corporis."},"path":{"type":"string","description":"path to volume","example":"Animi sunt suscipit."}},"example":{"name":"Laudantium natus.","path":"Et qui minima quo."},"required":["name","path"]},"StorageVolumesDeleteRequestBody":{"type":"object","properties":{"name":{"type":"string","description":"name of volume","example":"Et tenetur autem."}},"example":{"name":"Adipisci in quia cum autem."},"required":["name"]},"VMCreateRequestBody":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":15733691521736250176},"memory":{"type":"integer","description":"Memory (in megabytes)","example":3877737295592061159},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Ipsam qui omnis cum."},"storage":{"type":"array","items":{"$ref":"#/components/schemas/Storage"},"description":"Storage references","example":[{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."},{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."},{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."}]}},"example":{"cpus":1575598517893245258,"memory":10813764079942026063,"name":"A iusto.","storage":[{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."},{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."},{"cdrom":true,"image":"Eius officiis esse labore voluptas perferendis.","image_size":3976908564030419353,"volume":"Dicta id sint rerum rerum."}]},"required":["name","cpus","memory","storage"]},"VMCreateRequestBody2":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":9979901123914601451},"images":{"type":"array","items":{"$ref":"#/components/schemas/Image"},"description":"Image references","example":[{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."}]},"memory":{"type":"integer","description":"Memory (in megabytes)","example":6508283171340189569},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Repellendus quibusdam quo est."}},"example":{"cpus":1919979314251366638,"images":[{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."}],"memory":17071114923744362188,"name":"Vero dolores."},"required":["name","cpus","memory","images"]},"VMUpdateRequestBody":{"type":"object","properties":{"vm":{"$ref":"#/components/schemas/VMCreateRequestBody2"}},"example":{"vm":{"cpus":17043342971635177953,"images":[{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."},{"cdrom":false,"path":"Corrupti et voluptatibus et et occaecati."}],"memory":2551606264180670795,"name":"Rem et nobis."}},"required":["vm"]}}}}