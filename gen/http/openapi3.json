{"openapi":"3.0.3","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Asperiores tempora."},"example":"Inventore inventore qui nihil."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRequestBody"},"example":{"action":"Consequatur provident dignissimos.","parameters":{"Velit quod sit aut.":"Natus temporibus fugit occaecati ipsum qui."},"resource":"Officiis porro fugiat."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Officiis voluptatum deleniti maxime possimus vero."},"example":"Natus consectetur."}}}}}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteRequestBody"},"example":{"id":"Aut vero amet quia quis.","status":true,"status_reason":"Est et dicta id."}}}},"responses":{"200":{"description":"OK response."}}}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Sint et nesciunt et molestiae soluta ut."},"example":"Dolorem totam omnis molestiae."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Sed qui sint delectus quis."},"example":["Nobis nisi molestiae.","Tempora eum officiis sit quis.","Ducimus qui recusandae aliquid blanditiis repudiandae adipisci."]},"example":["Libero quas.","Tempore iste voluptatem est.","Deserunt blanditiis consequatur consequuntur praesentium consequatur."]}}}}}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Ea iusto modi aspernatur."},"example":"Deleniti incidunt."}}}}}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"schema":{"type":"string","description":"resource type","example":"Corporis ab nulla quis."},"example":"Voluptatem vel dicta."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextResponseBody"},"example":{"action":"Corporis sit non sit recusandae eum repellat.","parameters":{"Sint eveniet hic minus facere.":"Quas tempora nisi aperiam occaecati deserunt qui.","Temporibus esse reprehenderit qui molestias.":"Voluptatem qui nihil officia.","Vel vel illum voluptatem voluptatibus.":"Minima cum delectus occaecati enim."},"resource":"Unde inventore cupiditate soluta.","uuid":"Iure aut voluptas qui."}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Sunt iusto harum."},"example":"Accusantium labore."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponseBody"},"example":{"reason":"Repellendus eaque nesciunt quia.","status":false}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/storage/volume/add":{"post":{"tags":["spin-apiserver"],"summary":"add_volume spin-apiserver","description":"Add a volume for image allocation with backing storage, and name it","operationId":"spin-apiserver#add_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddVolumeRequestBody"},"example":{"path":"Autem neque adipisci.","volume":"Quia soluta veniam adipisci quia."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/create":{"post":{"tags":["spin-apiserver"],"summary":"create_image_on_volume spin-apiserver","description":"Create an image on a volume","operationId":"spin-apiserver#create_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Et et rerum ut voluptatem at fugit.","image_size":15419653682127034888,"volume":"Dolor veritatis quo non quae rerum officia."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/delete":{"post":{"tags":["spin-apiserver"],"summary":"delete_image_on_volume spin-apiserver","description":"Delete an image on a volume","operationId":"spin-apiserver#delete_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteImageOnVolumeRequestBody"},"example":{"image_name":"Minima et labore qui nobis.","volume":"Omnis dolor assumenda voluptatem dignissimos ut."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/info/{volume}/{image_name}":{"get":{"tags":["spin-apiserver"],"summary":"info_image_on_volume spin-apiserver","description":"Obtain information on an image","operationId":"spin-apiserver#info_image_on_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Ipsum natus quasi quia."},"example":"Ut suscipit cupiditate cumque ratione occaecati."},{"name":"image_name","in":"path","description":"image name","required":true,"schema":{"type":"string","description":"image name","example":"Vel in modi rerum."},"example":"Ut veritatis aut."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/move":{"post":{"tags":["spin-apiserver"],"summary":"move_image spin-apiserver","description":"Move an image from one volume to another","operationId":"spin-apiserver#move_image","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveImageRequestBody"},"example":{"image_name":"Ullam odio tenetur aliquid consequatur.","target_volume":"Id et autem ut debitis.","volume":"Quam neque."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/resize":{"post":{"tags":["spin-apiserver"],"summary":"resize_image_on_volume spin-apiserver","description":"Resize an image on a volume","operationId":"spin-apiserver#resize_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Harum et tempora rem qui quia.","image_size":7533879699541094989,"volume":"Non dicta quisquam rem qui."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/info/{volume}":{"get":{"tags":["spin-apiserver"],"summary":"info_volume spin-apiserver","description":"Get information on a volume","operationId":"spin-apiserver#info_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Eum laudantium tempora pariatur possimus autem."},"example":"Qui ad aut possimus quisquam harum."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/label/{volume}/{label}":{"post":{"tags":["spin-apiserver"],"summary":"label_volume spin-apiserver","description":"Apply a label to a volume.","operationId":"spin-apiserver#label_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Cupiditate amet."},"example":"Sapiente sequi molestiae inventore aut."},{"name":"label","in":"path","description":"label identifier to apply to volume","required":true,"schema":{"type":"string","description":"label identifier to apply to volume","example":"Officiis perspiciatis."},"example":"Dolore voluptate voluptas veniam."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/remove/{volume}":{"post":{"tags":["spin-apiserver"],"summary":"remove_volume spin-apiserver","description":"Remove a volume. Requires all images to be removed.","operationId":"spin-apiserver#remove_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Corporis quo."},"example":"Rerum odit."}],"responses":{"200":{"description":"OK response."}}}}},"components":{"schemas":{"AddRequestBody":{"type":"object","properties":{"action":{"type":"string","description":"Action name","example":"Libero commodi placeat."},"parameters":{"type":"object","description":"Action parameters","example":{"Est totam quasi eligendi quod.":"Sed cum.","Repudiandae eos.":"Quibusdam error dolorem.","Voluptatem culpa unde ut.":"Aut ut illum."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Qui sit nihil."}},"example":{"action":"Numquam provident occaecati animi.","parameters":{"Commodi accusamus veritatis quos.":"Et quisquam.","Officia voluptas voluptate.":"In animi quos voluptatem qui explicabo."},"resource":"Et aperiam impedit autem optio ut."},"required":["resource","action"]},"AddVolumeRequestBody":{"type":"object","properties":{"path":{"type":"string","description":"path to backing storage","example":"Itaque non quis quae."},"volume":{"type":"string","description":"volume identifier","example":"Ut ex molestiae quod distinctio voluptatibus."}},"example":{"path":"Enim quos numquam recusandae ut.","volume":"Accusantium laboriosam sunt minima saepe architecto."},"required":["volume","path"]},"CompleteRequestBody":{"type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Voluptas non officiis."},"status":{"type":"boolean","description":"status of work","example":true},"status_reason":{"type":"string","description":"reason of success/failure","example":"Quia quisquam hic est quisquam."}},"example":{"id":"Quae incidunt nulla sit.","status":true,"status_reason":"Voluptas dolorem."},"required":["id","status"]},"CreateImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Laboriosam fugit."},"image_size":{"type":"integer","description":"image size in GB","example":14295512975125348066},"volume":{"type":"string","description":"volume identifier","example":"Non voluptate est."}},"example":{"image_name":"Consectetur nihil omnis.","image_size":4727890621428056390,"volume":"Ut laboriosam."},"required":["image_name","image_size","volume"]},"DeleteImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Itaque omnis fuga."},"volume":{"type":"string","description":"volume identifier","example":"Incidunt quae est velit eaque mollitia."}},"example":{"image_name":"Odio similique qui qui architecto.","volume":"Nemo omnis quia deleniti voluptate."},"required":["image_name","volume"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":true},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":true}},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"},"required":["name","id","message","temporary","timeout","fault"]},"MoveImageRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Ea qui omnis qui."},"target_volume":{"type":"string","description":"volume identifier to move to","example":"Enim ut voluptas ullam quas aliquam."},"volume":{"type":"string","description":"volume identifier","example":"Et vel."}},"example":{"image_name":"Quaerat illo molestiae.","target_volume":"Adipisci et provident.","volume":"Cupiditate perspiciatis voluptas quia."},"required":["image_name","volume","target_volume"]},"NextResponseBody":{"type":"object","properties":{"action":{"type":"string","description":"action name","example":"Sequi temporibus."},"parameters":{"type":"object","description":"parameters for action","example":{"Cupiditate commodi aut asperiores quidem sit facilis.":"Cum repudiandae veniam vel.","Quae at sed necessitatibus et.":"Earum hic sequi."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"In inventore."},"uuid":{"type":"string","description":"Command ID","example":"Qui repellendus voluptate voluptas."}},"example":{"action":"Illum molestiae voluptates natus.","parameters":{"Iusto ex et.":"Saepe in repudiandae reiciendis eveniet repudiandae.","Perferendis impedit.":"Dolores reprehenderit quo ab iure."},"resource":"Aut tempore aliquam.","uuid":"Animi fugiat excepturi sed."},"required":["uuid","resource","action"]},"StatusResponseBody":{"type":"object","properties":{"reason":{"type":"string","description":"Failure reason (if any)","example":"Voluptas et inventore."},"status":{"type":"boolean","description":"Pass/Fail status","example":true}},"example":{"reason":"Deserunt dicta eaque reiciendis autem.","status":true},"required":["status"]}}}}