{"openapi":"3.0.3","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Dignissimos ullam sint fugit rem totam est."},"example":"Earum nisi sed."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRequestBody"},"example":{"action":"Deserunt vitae rerum illum sint.","dependencies":["Et autem ut debitis dolores.","Occaecati impedit quas laborum consequatur."],"parameters":{"Odio tenetur aliquid consequatur.":"Quam neque."},"resource":"Magnam sint ad ut nulla laboriosam."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Quos maxime ut error facilis modi autem."},"example":"Quibusdam non neque magnam."}}}}}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteRequestBody"},"example":{"id":"Iure aut voluptas qui.","status":true,"status_reason":"Inventore cupiditate soluta ut corporis sit."}}}},"responses":{"200":{"description":"OK response."}}}},"/control/shutdown/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_shutdown spin-apiserver","operationId":"spin-apiserver#control_shutdown","parameters":[{"name":"id","in":"path","description":"ID of VM to shutdown","required":true,"schema":{"type":"integer","description":"ID of VM to shutdown","example":7980892859187054070},"example":690719096842054834}],"responses":{"200":{"description":"OK response."}}}},"/control/start/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_start spin-apiserver","operationId":"spin-apiserver#control_start","parameters":[{"name":"id","in":"path","description":"ID of VM to start","required":true,"schema":{"type":"integer","description":"ID of VM to start","example":8242616996766079634},"example":79236725603308266}],"responses":{"200":{"description":"OK response."}}}},"/control/stop/{id}":{"post":{"tags":["spin-apiserver"],"summary":"control_stop spin-apiserver","operationId":"spin-apiserver#control_stop","parameters":[{"name":"id","in":"path","description":"ID of VM to stop","required":true,"schema":{"type":"integer","description":"ID of VM to stop","example":3954204645673116440},"example":2184803700749897776}],"responses":{"200":{"description":"OK response."}}}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Est ea."},"example":"Veniam ut voluptatibus modi quo est."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Corporis nam."},"example":["Modi qui voluptatem placeat rem.","Dolore ea at ut veritatis expedita voluptatem."]},"example":["Vitae a non illum modi.","Est quia temporibus nam ex incidunt."]}}}}}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Adipisci tempora."},"example":"Dicta modi."}}}}}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"schema":{"type":"string","description":"resource type","example":"Cumque ab officiis veniam et."},"example":"Sit dolores sunt repudiandae quas assumenda voluptatem."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextResponseBody"},"example":{"action":"Illum repellendus eaque nesciunt.","parameters":{"Neque reiciendis ipsum.":"Consequatur quo exercitationem occaecati magnam molestiae qui."},"resource":"Iste illum omnis.","uuid":"Natus non consequatur voluptatem nostrum."}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Est omnis perferendis quia veritatis."},"example":"Est illo."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponseBody"},"example":{"causer":"Assumenda ullam qui et.","reason":"Non ut hic.","status":false}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/storage/images/create":{"post":{"tags":["spin-registry"],"summary":"storage_images_create spin-registry","description":"add an image definition to the registry","operationId":"spin-registry#storage_images_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Storage"},"example":{"cdrom":false,"image":"Ut ea excepturi.","image_size":7318153670735085457,"volume":"Quia aliquam sit necessitatibus pariatur quam deleniti."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Image"},"example":{"cdrom":false,"path":"Quod commodi quia facere.","volume":"Nesciunt natus dolorem nemo vel tempora."}}}}}}},"/storage/images/delete":{"post":{"tags":["spin-registry"],"summary":"storage_images_delete spin-registry","description":"remove an image definition from the registry","operationId":"spin-registry#storage_images_delete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesDeleteRequestBody"},"example":{"image_name":"Fugit incidunt tempora.","volume_name":"Optio quis aut quis vel officia."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/images/get":{"get":{"tags":["spin-registry"],"summary":"storage_images_get spin-registry","description":"retrieves an image definition from the registry","operationId":"spin-registry#storage_images_get","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesDeleteRequestBody"},"example":{"image_name":"Tempore voluptate voluptas.","volume_name":"Sed quae ea."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Image"},"example":{"cdrom":false,"path":"Mollitia eius hic.","volume":"Nulla et cum."}}}}}}},"/storage/images/list":{"get":{"tags":["spin-registry"],"summary":"storage_images_list spin-registry","description":"list all images by volume","operationId":"spin-registry#storage_images_list","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageImagesListRequestBody"},"example":{"volume_name":"Temporibus explicabo sit ab quo et quis."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Voluptatem minima eos."},"example":["Vitae facere ducimus esse quaerat aut repellendus.","Nostrum quam.","Fuga mollitia id.","Officiis similique nostrum."]},"example":["Aliquam fuga tempore aut ducimus dolorum numquam.","Consequatur distinctio rerum aut culpa accusamus impedit."]}}}}}},"/storage/volumes/create":{"post":{"tags":["spin-registry"],"summary":"storage_volumes_create spin-registry","description":"create a new volume","operationId":"spin-registry#storage_volumes_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageVolumesCreateRequestBody"},"example":{"name":"Vel qui dolores nihil autem dolorem.","path":"Quisquam vero sit."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volumes/delete":{"post":{"tags":["spin-registry"],"summary":"storage_volumes_delete spin-registry","description":"delete an existing volume","operationId":"spin-registry#storage_volumes_delete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageVolumesDeleteRequestBody"},"example":{"name":"Molestiae asperiores."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volumes/list":{"get":{"tags":["spin-registry"],"summary":"storage_volumes_list spin-registry","description":"list all volumes","operationId":"spin-registry#storage_volumes_list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"object","example":{"Aut culpa labore dicta error dolores reprehenderit.":"Aliquam illo dolor sint et asperiores.","Tempore commodi deserunt et nemo expedita libero.":"Id dolor similique."},"additionalProperties":true},"example":{"Fuga veritatis debitis dolores.":"Animi eligendi dolor.","Vitae autem mollitia facilis distinctio.":"A sit nihil voluptas ea ea."}}}}}}},"/vm/create":{"post":{"tags":["spin-registry"],"summary":"vm_create spin-registry","description":"Create a VM","operationId":"spin-registry#vm_create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody2"},"example":{"cpus":17947092167867694340,"images":[{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."}],"memory":17643772877660978986,"name":"Minima cum delectus occaecati enim."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"integer","example":5030323474742448459},"example":5816977068149458459}}}}}},"/vm/delete/{id}":{"post":{"tags":["spin-registry"],"summary":"vm_delete spin-registry","description":"Delete a VM by ID","operationId":"spin-registry#vm_delete","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":8269822299929738958},"example":12628878072929394706}],"responses":{"200":{"description":"OK response."}}}},"/vm/get/{id}":{"get":{"tags":["spin-registry"],"summary":"vm_get spin-registry","description":"Retrieve a VM by ID","operationId":"spin-registry#vm_get","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":9462182494075856820},"example":7602565543342206846}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody2"},"example":{"cpus":18117003792351848781,"images":[{"cdrom":true,"path":"Labore voluptas perferendis ea iusto adipisci.","volume":"Non aut minima."},{"cdrom":true,"path":"Labore voluptas perferendis ea iusto adipisci.","volume":"Non aut minima."},{"cdrom":true,"path":"Labore voluptas perferendis ea iusto adipisci.","volume":"Non aut minima."}],"memory":11558656387660500473,"name":"Qui fugit quis."}}}}}}},"/vm/list":{"get":{"tags":["spin-registry"],"summary":"vm_list spin-registry","description":"Retrieve all VM IDs","operationId":"spin-registry#vm_list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","example":10201408861359388813},"example":[10246474114867751402,3223206614813158083,16532479125458586046,13635831619747663269]},"example":[9989459902408922925,15696056500231921993,5435267161612186444,12227169246022071912]}}}}}},"/vm/update/{id}":{"post":{"tags":["spin-registry"],"summary":"vm_update spin-registry","description":"Update a VM","operationId":"spin-registry#vm_update","parameters":[{"name":"id","in":"path","description":"ID of VM to update","required":true,"schema":{"type":"integer","description":"ID of VM to update","example":2103949561816007462},"example":17970882761446779996}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMUpdateRequestBody"},"example":{"vm":{"cpus":6421225864845588134,"images":[{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."}],"memory":15540618699971399982,"name":"Suscipit est et dicta."}}}}},"responses":{"200":{"description":"OK response."}}}}},"components":{"schemas":{"AddRequestBody":{"type":"object","properties":{"action":{"type":"string","description":"Action name","example":"In qui eaque omnis odio quia."},"dependencies":{"type":"array","items":{"type":"string","example":"Ut est quia nemo suscipit."},"description":"Dependency UUIDs","example":["Non ut id aut dolores.","Mollitia est aliquam.","Nisi placeat quasi consequatur ut sed."]},"parameters":{"type":"object","description":"Action parameters","example":{"Deleniti autem ex tempora.":"Adipisci aliquid aliquam vel sit sit.","Fuga omnis dignissimos nihil soluta.":"Voluptas quae autem illum enim sequi soluta.","Harum aliquam.":"Dicta dignissimos optio quisquam."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Eligendi id rerum hic."}},"example":{"action":"Sint quo cum fugit facere ea.","dependencies":["Omnis asperiores qui quibusdam odio est nulla.","Molestiae cupiditate neque eos.","Nihil sunt doloremque amet sint ut perspiciatis."],"parameters":{"Commodi nihil error ipsum minima fugit vero.":"In voluptas laborum corrupti magnam quis.","Ea repudiandae illum ut ut optio.":"Dolor doloremque similique.","Veniam iusto sint.":"Voluptatem recusandae unde."},"resource":"Autem ut."},"required":["resource","action"]},"CompleteRequestBody":{"type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Dicta optio voluptatem veniam fugit."},"status":{"type":"boolean","description":"status of work","example":true},"status_reason":{"type":"string","description":"reason of success/failure","example":"Repellat cupiditate odit commodi veniam corrupti."}},"example":{"id":"Consequatur eos aut laborum at.","status":false,"status_reason":"Voluptatem quos inventore aut ratione eaque perferendis."},"required":["id","status"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":true}},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"},"required":["name","id","message","temporary","timeout","fault"]},"Image":{"type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this a cdrom image?","example":false},"path":{"type":"string","description":"Image path","example":"Ex est suscipit."},"volume":{"type":"string","description":"Volume name","example":"Deleniti distinctio rerum doloremque architecto quia corrupti."}},"example":{"cdrom":false,"path":"Optio minus repellendus quibusdam.","volume":"Tempora et."},"required":["path","cdrom"]},"NextResponseBody":{"type":"object","properties":{"action":{"type":"string","description":"action name","example":"Minima cum quae voluptas et."},"parameters":{"type":"object","description":"Action parameters","example":{"Corporis occaecati aut adipisci officia.":"Reprehenderit consequuntur inventore.","Et aut omnis reprehenderit dolorum non.":"Voluptate tempora fugit qui doloremque accusantium."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"Odio ea."},"uuid":{"type":"string","description":"Command ID","example":"Architecto in temporibus."}},"example":{"action":"Et et.","parameters":{"Officiis velit hic unde assumenda praesentium.":"Blanditiis eum."},"resource":"Magnam officia quaerat ex vel ipsum.","uuid":"Tempora est delectus et quia."},"required":["uuid","resource","action"]},"StatusResponseBody":{"type":"object","properties":{"causer":{"type":"string","description":"Failure causer as UUID (if any)","example":"Sed iusto quam non ratione fugiat distinctio."},"reason":{"type":"string","description":"Failure reason (if any)","example":"Dicta iusto tenetur qui ipsa et."},"status":{"type":"boolean","description":"Pass/Fail status","example":false}},"example":{"causer":"Repudiandae et vel corporis rerum molestias.","reason":"Temporibus a qui illo.","status":false},"required":["status"]},"Storage":{"type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this image a cdrom?","example":true},"image":{"type":"string","description":"Image filename, no `/` characters","example":"Sed ducimus ratione doloremque molestias enim architecto."},"image_size":{"type":"integer","description":"Image size (in gigabytes); required if image is not a cdrom","example":2991777116152129871},"volume":{"type":"string","description":"Volume name; required if image is not a cdrom","example":"Quisquam odio."}},"example":{"cdrom":true,"image":"Aspernatur illo eligendi.","image_size":5362336180170212837,"volume":"Dolorem quis dolores laborum ut voluptatem sed."},"required":["image","cdrom"]},"StorageImagesDeleteRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"name of image","example":"Molestiae quia eos."},"volume_name":{"type":"string","description":"name of volume","example":"Pariatur cumque iusto sapiente."}},"example":{"image_name":"Officiis quia cum tenetur non occaecati.","volume_name":"Perferendis mollitia."},"required":["volume_name","image_name"]},"StorageImagesListRequestBody":{"type":"object","properties":{"volume_name":{"type":"string","description":"name of volume to list images for","example":"Adipisci in quia cum autem."}},"example":{"volume_name":"Voluptatem est molestiae accusamus aperiam."},"required":["volume_name"]},"StorageVolumesCreateRequestBody":{"type":"object","properties":{"name":{"type":"string","description":"name of volume","example":"Maxime dolorum voluptatibus minus neque."},"path":{"type":"string","description":"path to volume","example":"Omnis corporis."}},"example":{"name":"Animi sunt suscipit.","path":"Laudantium natus."},"required":["name","path"]},"StorageVolumesDeleteRequestBody":{"type":"object","properties":{"name":{"type":"string","description":"name of volume","example":"Et qui minima quo."}},"example":{"name":"Et tenetur autem."},"required":["name"]},"VMCreateRequestBody":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":15733691521736250176},"memory":{"type":"integer","description":"Memory (in megabytes)","example":3877737295592061159},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Ipsam qui omnis cum."},"storage":{"type":"array","items":{"$ref":"#/components/schemas/Storage"},"description":"Storage references","example":[{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."},{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."},{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."}]}},"example":{"cpus":1575598517893245258,"memory":10813764079942026063,"name":"A iusto.","storage":[{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."},{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."},{"cdrom":true,"image":"Provident sint.","image_size":867860291963136244,"volume":"Recusandae eum repellat."}]},"required":["name","cpus","memory","storage"]},"VMCreateRequestBody2":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":1919979314251366638},"images":{"type":"array","items":{"$ref":"#/components/schemas/Image"},"description":"Image references","example":[{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."}]},"memory":{"type":"integer","description":"Memory (in megabytes)","example":17071114923744362188},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Vero dolores."}},"example":{"cpus":2937949108987365914,"images":[{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."}],"memory":4387007597452552916,"name":"Impedit voluptas."},"required":["name","cpus","memory","images"]},"VMUpdateRequestBody":{"type":"object","properties":{"vm":{"$ref":"#/components/schemas/VMCreateRequestBody2"}},"example":{"vm":{"cpus":6421225864845588134,"images":[{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."},{"cdrom":true,"path":"Nihil officia aspernatur.","volume":"Illum voluptatem voluptatibus."}],"memory":15540618699971399982,"name":"Suscipit est et dicta."}},"required":["vm"]}}}}