{"openapi":"3.0.3","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Et magnam sed iusto quam non."},"example":"Fugiat distinctio eveniet assumenda temporibus."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRequestBody"},"example":{"action":"Id et autem ut debitis.","parameters":{"Occaecati impedit quas laborum consequatur.":"Itaque aut dolorem.","Possimus velit quod sit.":"Mollitia natus temporibus fugit occaecati ipsum qui.","Quibusdam dolor sit.":"Porro fugiat ex consequatur provident dignissimos."},"resource":"Quam neque."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Aut architecto deleniti incidunt alias."},"example":"Qui illo eos repudiandae et vel."}}}}}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteRequestBody"},"example":{"id":"Cum delectus occaecati enim in.","status":true,"status_reason":"Amet quia quis omnis suscipit."}}}},"responses":{"200":{"description":"OK response."}}}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Rerum molestias officiis accusamus rerum."},"example":"Architecto in temporibus."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Tempora quisquam inventore inventore qui nihil."},"example":["Consectetur optio sint.","Nesciunt et molestiae soluta ut animi.","Totam omnis molestiae.","Rerum libero quas."]},"example":["Ea et minima.","Quae voluptas.","Omnis enim.","Aut omnis reprehenderit dolorum."]}}}}}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Est quisquam inventore quae."},"example":"Tenetur qui."}}}}}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"schema":{"type":"string","description":"resource type","example":"Facere reprehenderit consequuntur inventore reiciendis tempora est."},"example":"Et quia consequatur magnam officia."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextResponseBody"},"example":{"action":"Provident sint.","parameters":{"Minus facere animi quas tempora nisi aperiam.":"Deserunt qui praesentium temporibus esse.","Qui molestias eum voluptatem qui nihil.":"Aspernatur vel vel illum voluptatem voluptatibus est."},"resource":"Corporis sit non sit recusandae eum repellat.","uuid":"Unde inventore cupiditate soluta."}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Qui voluptate tempora fugit qui."},"example":"Accusantium eius corporis occaecati aut adipisci."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponseBody"},"example":{"causer":"Neque reiciendis ipsum.","reason":"Repellendus eaque nesciunt quia.","status":false}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/storage/volume/add":{"post":{"tags":["spin-apiserver"],"summary":"add_volume spin-apiserver","description":"Add a volume for image allocation with backing storage, and name it","operationId":"spin-apiserver#add_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddVolumeRequestBody"},"example":{"path":"Eum officiis eligendi.","volume":"Non deleniti consequuntur qui doloremque."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/create":{"post":{"tags":["spin-apiserver"],"summary":"create_image_on_volume spin-apiserver","description":"Create an image on a volume","operationId":"spin-apiserver#create_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Vitae sunt amet nostrum amet.","image_size":9785040533924627437,"volume":"Dolorem odio laborum et."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/delete":{"post":{"tags":["spin-apiserver"],"summary":"delete_image_on_volume spin-apiserver","description":"Delete an image on a volume","operationId":"spin-apiserver#delete_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteImageOnVolumeRequestBody"},"example":{"image_name":"Rerum ut voluptatem at fugit fuga impedit.","volume":"Veritatis quo non quae rerum officia iusto."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/info/{volume}/{image_name}":{"get":{"tags":["spin-apiserver"],"summary":"info_image_on_volume spin-apiserver","description":"Obtain information on an image","operationId":"spin-apiserver#info_image_on_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Corporis nam."},"example":"Deserunt modi qui voluptatem placeat."},{"name":"image_name","in":"path","description":"image name","required":true,"schema":{"type":"string","description":"image name","example":"Ullam dolore ea at ut."},"example":"Expedita voluptatem reiciendis voluptatem dicta."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/move":{"post":{"tags":["spin-apiserver"],"summary":"move_image spin-apiserver","description":"Move an image from one volume to another","operationId":"spin-apiserver#move_image","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveImageRequestBody"},"example":{"image_name":"Qui ut.","target_volume":"Nesciunt omnis voluptatem ullam.","volume":"Est reprehenderit."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/resize":{"post":{"tags":["spin-apiserver"],"summary":"resize_image_on_volume spin-apiserver","description":"Resize an image on a volume","operationId":"spin-apiserver#resize_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Et labore.","image_size":8231368540121560477,"volume":"Consequatur omnis dolor assumenda."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/info/{volume}":{"get":{"tags":["spin-apiserver"],"summary":"info_volume spin-apiserver","description":"Get information on a volume","operationId":"spin-apiserver#info_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Nihil sunt doloremque amet sint ut perspiciatis."},"example":"Quos maxime ut error facilis modi autem."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/remove/{volume}":{"post":{"tags":["spin-apiserver"],"summary":"remove_volume spin-apiserver","description":"Remove a volume. Requires all images to be removed.","operationId":"spin-apiserver#remove_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Asperiores qui quibusdam odio est nulla."},"example":"Molestiae cupiditate neque eos."}],"responses":{"200":{"description":"OK response."}}}},"/vm/create":{"post":{"tags":["spin-registry"],"summary":"vm/create spin-registry","description":"Create a VM","operationId":"spin-registry#vm/create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody"},"example":{"cpus":6421225864845588134,"memory":15540618699971399982,"name":"Et dicta.","storage":[{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."}]}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"integer","example":16362411709500106300},"example":2512325580815260819}}}}}},"/vm/delete/{id}":{"post":{"tags":["spin-registry"],"summary":"vm/delete spin-registry","description":"Delete a VM by ID","operationId":"spin-registry#vm/delete","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":11668286013169426617},"example":9880125098995389704}],"responses":{"200":{"description":"OK response."}}}},"/vm/get/{id}":{"get":{"tags":["spin-registry"],"summary":"vm/get spin-registry","description":"Retrieve a VM by ID","operationId":"spin-registry#vm/get","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":2802152491193061350},"example":10567433384525527512}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMCreateRequestBody"},"example":{"cpus":13026661461146096768,"memory":9696665001313275905,"name":"Et nobis quia neque excepturi.","storage":[{"cdrom":true,"image":"Adipisci quia non nihil vitae nesciunt minima.","image_size":15107782813490131477,"volume":"Occaecati qui quo dolore soluta."},{"cdrom":true,"image":"Adipisci quia non nihil vitae nesciunt minima.","image_size":15107782813490131477,"volume":"Occaecati qui quo dolore soluta."}]}}}}}}},"/vm/list":{"get":{"tags":["spin-registry"],"summary":"vm/list spin-registry","description":"Retrieve all VM IDs","operationId":"spin-registry#vm/list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","example":11055455870090139273},"example":[13340586693210379934,9553536164741503689,5537594582892317809]},"example":[9155960044571113458,2240185166773016435]}}}}}},"/vm/update/{id}":{"post":{"tags":["spin-registry"],"summary":"vm/update spin-registry","description":"Update a VM","operationId":"spin-registry#vm/update","parameters":[{"name":"id","in":"path","description":"ID of VM to update","required":true,"schema":{"type":"integer","description":"ID of VM to update","example":16195686809273856199},"example":15538821276590404181}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VMUpdateRequestBody"},"example":{"vm":{"cpus":8415388083871949362,"memory":15948619849308310515,"name":"Et qui fugit quis dignissimos qui.","storage":[{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."}]}}}}},"responses":{"200":{"description":"OK response."}}}}},"components":{"schemas":{"AddRequestBody":{"type":"object","properties":{"action":{"type":"string","description":"Action name","example":"Minima voluptas dolorem et corporis quo dolores."},"parameters":{"type":"object","description":"Action parameters","example":{"Tenetur cupiditate amet fugiat sapiente sequi molestiae.":"Aut consequatur officiis perspiciatis inventore dolore voluptate.","Veniam soluta eum laudantium.":"Pariatur possimus autem eveniet qui ad aut."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Nulla sit."}},"example":{"action":"Quasi quia vel ut suscipit cupiditate.","parameters":{"Occaecati quos vel in modi.":"Eos ut."},"resource":"Quisquam harum ad ipsum."},"required":["resource","action"]},"AddVolumeRequestBody":{"type":"object","properties":{"path":{"type":"string","description":"path to backing storage","example":"Et inventore."},"volume":{"type":"string","description":"volume identifier","example":"Accusantium consequuntur."}},"example":{"path":"Esse blanditiis qui repellendus voluptate.","volume":"Molestias deserunt dicta eaque reiciendis autem exercitationem."},"required":["volume","path"]},"CompleteRequestBody":{"type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Dicta dignissimos optio quisquam."},"status":{"type":"boolean","description":"status of work","example":false},"status_reason":{"type":"string","description":"reason of success/failure","example":"Est quia nemo suscipit alias."}},"example":{"id":"Non ut id aut dolores.","status":false,"status_reason":"Est aliquam libero nisi placeat quasi."},"required":["id","status"]},"CreateImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Perspiciatis in."},"image_size":{"type":"integer","description":"image size in GB","example":7651822808426839839},"volume":{"type":"string","description":"volume identifier","example":"Sequi temporibus."}},"example":{"image_name":"Inventore cupiditate commodi aut asperiores quidem sit.","image_size":4099979743360283536,"volume":"Cum repudiandae veniam vel."},"required":["image_name","image_size","volume"]},"DeleteImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Quae at sed necessitatibus et."},"volume":{"type":"string","description":"volume identifier","example":"Earum hic sequi."}},"example":{"image_name":"Animi fugiat excepturi sed.","volume":"Aut tempore aliquam."},"required":["image_name","volume"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":true},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":false}},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"},"required":["name","id","message","temporary","timeout","fault"]},"MoveImageRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Illum molestiae voluptates natus."},"target_volume":{"type":"string","description":"volume identifier to move to","example":"Doloremque saepe in."},"volume":{"type":"string","description":"volume identifier","example":"Qui iusto ex."}},"example":{"image_name":"Reiciendis eveniet repudiandae reiciendis perferendis impedit reiciendis.","target_volume":"Non officiis molestiae nostrum quia quisquam.","volume":"Reprehenderit quo ab iure nihil."},"required":["image_name","volume","target_volume"]},"NextResponseBody":{"type":"object","properties":{"action":{"type":"string","description":"action name","example":"Similique aliquid corrupti amet numquam sed totam."},"parameters":{"type":"object","description":"Action parameters","example":{"Omnis quia culpa ut quidem.":"Et qui porro labore labore accusantium ut."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"Et iusto fugit."},"uuid":{"type":"string","description":"Command ID","example":"Dolorem quibusdam minus expedita."}},"example":{"action":"Eligendi id rerum hic.","parameters":{"Aliquid aliquam vel sit sit.":"Harum aliquam.","Necessitatibus voluptas quae autem illum enim.":"Soluta omnis deleniti autem ex tempora fugit.","Qui eaque omnis odio.":"Voluptas deserunt fuga omnis dignissimos nihil."},"resource":"Adipisci tempora.","uuid":"Odio explicabo perferendis quaerat totam quia sit."},"required":["uuid","resource","action"]},"StatusResponseBody":{"type":"object","properties":{"causer":{"type":"string","description":"Failure causer as UUID (if any)","example":"Blanditiis consequatur consequuntur praesentium consequatur."},"reason":{"type":"string","description":"Failure reason (if any)","example":"Iste voluptatem est est."},"status":{"type":"boolean","description":"Pass/Fail status","example":true}},"example":{"causer":"Ab nulla quis exercitationem voluptatem.","reason":"Iusto harum rerum accusantium labore numquam.","status":false},"required":["status"]},"Storage":{"type":"object","properties":{"cdrom":{"type":"boolean","description":"Is this image a cdrom?","example":true},"image":{"type":"string","description":"Image filename, must not include `/`","example":"Libero ea repudiandae."},"image_size":{"type":"integer","description":"Image size (in gigabytes)","example":3030823960754760868},"volume":{"type":"string","description":"Volume name, must not include `/`","example":"Sint quo cum fugit facere ea."}},"example":{"cdrom":true,"image":"Sint voluptatem.","image_size":4958259689897901043,"volume":"Optio nemo dolor doloremque similique eligendi veniam."},"required":["volume","image"]},"VMCreateRequestBody":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":5359207589197276763},"memory":{"type":"integer","description":"Memory (in megabytes)","example":8274532669424810060},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Ut sed fugiat."},"storage":{"type":"array","items":{"$ref":"#/components/schemas/Storage"},"description":"Storage references","example":[{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."}]}},"example":{"cpus":7636634391002491891,"memory":388112316628318573,"name":"Commodi nihil error ipsum minima fugit vero.","storage":[{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."}]},"required":["name","cpus","memory","storage"]},"VMUpdateRequestBody":{"type":"object","properties":{"vm":{"$ref":"#/components/schemas/VMCreateRequestBody"}},"example":{"vm":{"cpus":8415388083871949362,"memory":15948619849308310515,"name":"Et qui fugit quis dignissimos qui.","storage":[{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."},{"cdrom":true,"image":"Labore voluptas perferendis ea iusto adipisci.","image_size":8351098711286704476,"volume":"Porro eius officiis."}]}},"required":["vm"]}}}}