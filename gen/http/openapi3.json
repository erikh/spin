{"openapi":"3.0.3","info":{"title":"Spin API service","description":"HTTP service for controlling the spin service","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/add/{id}":{"post":{"tags":["spin-broker"],"summary":"add spin-broker","description":"Add a command to the package","operationId":"spin-broker#add","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Architecto in temporibus."},"example":"Odio ea."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRequestBody"},"example":{"action":"Et maiores ut voluptatem sed.","parameters":{"Et repellat vero alias doloribus impedit impedit.":"Dolor ex consequatur non.","Hic assumenda.":"Ullam qui et quidem qui voluptate sunt."},"resource":"Ratione et ex tempore ipsum in."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Rerum libero quas."},"example":"Minima cum quae voluptas et."}}}}}},"/complete":{"post":{"tags":["spin-broker"],"summary":"complete spin-broker","description":"Mark a command as completed with a result status","operationId":"spin-broker#complete","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteRequestBody"},"example":{"id":"Corrupti et voluptatibus et et occaecati.","status":false,"status_reason":"Dolore soluta consectetur adipisci quia."}}}},"responses":{"200":{"description":"OK response."}}}},"/create":{"post":{"tags":["spin-registry"],"summary":"create spin-registry","description":"Create a VM","operationId":"spin-registry#create","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRequestBody"},"example":{"cpus":11176502060165847513,"memory":15107782813490131477,"name":"Nihil vitae nesciunt.","storage":[{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."}]}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"integer","example":7491173913955236358},"example":6455542069965926863}}}}}},"/delete/{id}":{"post":{"tags":["spin-registry"],"summary":"delete spin-registry","description":"Delete a VM by ID","operationId":"spin-registry#delete","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":9248311291022215834},"example":7360959357847241604}],"responses":{"200":{"description":"OK response."}}}},"/enqueue/{id}":{"post":{"tags":["spin-broker"],"summary":"enqueue spin-broker","description":"Enqueue the package into the various resource queues","operationId":"spin-broker#enqueue","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Enim et aut."},"example":"Reprehenderit dolorum non qui."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"string","example":"Tempore iste voluptatem est."},"example":["Blanditiis consequatur consequuntur praesentium consequatur.","Sunt iusto harum.","Accusantium labore.","Corporis ab nulla quis."]},"example":["Fugit qui doloremque accusantium.","Corporis occaecati aut adipisci officia.","Reprehenderit consequuntur inventore."]}}}}}},"/get/{id}":{"get":{"tags":["spin-registry"],"summary":"get spin-registry","description":"Retrieve a VM by ID","operationId":"spin-registry#get","parameters":[{"name":"id","in":"path","description":"ID of VM to remove","required":true,"schema":{"type":"integer","description":"ID of VM to remove","example":17854607656134289617},"example":13686006352880005019}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRequestBody"},"example":{"cpus":11516433357545643392,"memory":5103641069140905777,"name":"Nulla numquam rerum asperiores corporis aut enim.","storage":[{"image":"Ab quo et.","image_size":2469087966589926793,"volume":"Ut temporibus explicabo."},{"image":"Ab quo et.","image_size":2469087966589926793,"volume":"Ut temporibus explicabo."},{"image":"Ab quo et.","image_size":2469087966589926793,"volume":"Ut temporibus explicabo."},{"image":"Ab quo et.","image_size":2469087966589926793,"volume":"Ut temporibus explicabo."}]}}}}}}},"/list":{"get":{"tags":["spin-registry"],"summary":"list spin-registry","description":"Retrieve all VM IDs","operationId":"spin-registry#list","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","example":13340586693210379934},"example":[5537594582892317809,111008344620405731,7885564251855005205]},"example":[7853613916138906295,4536400087542220023,3831294110757790406,12945565049969459218]}}}}}},"/new":{"post":{"tags":["spin-broker"],"summary":"new spin-broker","description":"Create a new package; a collection of items to join into the queue simultaneously","operationId":"spin-broker#new","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","example":"Qui ad aut possimus quisquam harum."},"example":"Rerum molestias officiis accusamus rerum."}}}}}},"/next/{resource}":{"get":{"tags":["spin-broker"],"summary":"next spin-broker","description":"Get the next command for a given resource","operationId":"spin-broker#next","parameters":[{"name":"resource","in":"path","description":"resource type","required":true,"schema":{"type":"string","description":"resource type","example":"Et et."},"example":"Officiis officiis."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NextResponseBody"},"example":{"action":"Esse labore voluptas.","parameters":{"Fugit quis.":"Qui error modi magni.","Iusto adipisci sapiente temporibus.":"Aut minima recusandae et."},"resource":"Rerum rerum porro eius.","uuid":"Quis omnis suscipit est et dicta id."}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/status/{id}":{"get":{"tags":["spin-broker"],"summary":"status spin-broker","description":"Get the status for a package","operationId":"spin-broker#status","parameters":[{"name":"id","in":"path","description":"Package ID","required":true,"schema":{"type":"string","description":"Package ID","example":"Tempora est delectus et quia."},"example":"Magnam officia quaerat ex vel ipsum."}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponseBody"},"example":{"reason":"Qui nihil officia aspernatur vel vel.","status":true}}}},"400":{"description":"No records were found","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"}}}}}}},"/storage/volume/add":{"post":{"tags":["spin-apiserver"],"summary":"add_volume spin-apiserver","description":"Add a volume for image allocation with backing storage, and name it","operationId":"spin-apiserver#add_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddVolumeRequestBody"},"example":{"path":"Distinctio cumque vitae sunt amet nostrum amet.","volume":"Sunt modi ipsam."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/create":{"post":{"tags":["spin-apiserver"],"summary":"create_image_on_volume spin-apiserver","description":"Create an image on a volume","operationId":"spin-apiserver#create_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Eius est reprehenderit dolor nesciunt omnis.","image_size":12129816477379786966,"volume":"Amet magnam sint ad."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/delete":{"post":{"tags":["spin-apiserver"],"summary":"delete_image_on_volume spin-apiserver","description":"Delete an image on a volume","operationId":"spin-apiserver#delete_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteImageOnVolumeRequestBody"},"example":{"image_name":"Nulla laboriosam non deserunt vitae rerum.","volume":"Sint ducimus ullam odio."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/info/{volume}/{image_name}":{"get":{"tags":["spin-apiserver"],"summary":"info_image_on_volume spin-apiserver","description":"Obtain information on an image","operationId":"spin-apiserver#info_image_on_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Tenetur qui."},"example":"Et magnam sed iusto quam non."},{"name":"image_name","in":"path","description":"image name","required":true,"schema":{"type":"string","description":"image name","example":"Fugiat distinctio eveniet assumenda temporibus."},"example":"Qui illo eos repudiandae et vel."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/move":{"post":{"tags":["spin-apiserver"],"summary":"move_image spin-apiserver","description":"Move an image from one volume to another","operationId":"spin-apiserver#move_image","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveImageRequestBody"},"example":{"image_name":"Possimus velit quod sit.","target_volume":"Non aut molestiae deleniti ad dolorem eos.","volume":"Mollitia natus temporibus fugit occaecati ipsum qui."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/image/resize":{"post":{"tags":["spin-apiserver"],"summary":"resize_image_on_volume spin-apiserver","description":"Resize an image on a volume","operationId":"spin-apiserver#resize_image_on_volume","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageOnVolumeRequestBody"},"example":{"image_name":"Aliquid consequatur atque quam neque.","image_size":930220378755301578,"volume":"Et autem ut debitis dolores."}}}},"responses":{"200":{"description":"OK response."}}}},"/storage/volume/info/{volume}":{"get":{"tags":["spin-apiserver"],"summary":"info_volume spin-apiserver","description":"Get information on a volume","operationId":"spin-apiserver#info_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Ullam dolore ea at ut."},"example":"Expedita voluptatem reiciendis voluptatem dicta."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/label/{volume}/{label}":{"post":{"tags":["spin-apiserver"],"summary":"label_volume spin-apiserver","description":"Apply a label to a volume.","operationId":"spin-apiserver#label_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Nihil sunt doloremque amet sint ut perspiciatis."},"example":"Quos maxime ut error facilis modi autem."},{"name":"label","in":"path","description":"label identifier to apply to volume","required":true,"schema":{"type":"string","description":"label identifier to apply to volume","example":"Corporis nam."},"example":"Deserunt modi qui voluptatem placeat."}],"responses":{"200":{"description":"OK response."}}}},"/storage/volume/remove/{volume}":{"post":{"tags":["spin-apiserver"],"summary":"remove_volume spin-apiserver","description":"Remove a volume. Requires all images to be removed.","operationId":"spin-apiserver#remove_volume","parameters":[{"name":"volume","in":"path","description":"volume identifier","required":true,"schema":{"type":"string","description":"volume identifier","example":"Quibusdam odio est nulla."},"example":"Molestiae cupiditate neque eos."}],"responses":{"200":{"description":"OK response."}}}},"/update/{id}":{"post":{"tags":["spin-registry"],"summary":"update spin-registry","description":"Update a VM","operationId":"spin-registry#update","parameters":[{"name":"id","in":"path","description":"ID of VM to update","required":true,"schema":{"type":"integer","description":"ID of VM to update","example":12144544682233722513},"example":10115799287551316782}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRequestBody"},"example":{"cpus":13225308882234053238,"memory":13801504870798650692,"name":"Vel qui vel qui dolores nihil.","storage":[{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."}]}}}},"responses":{"200":{"description":"OK response."}}}}},"components":{"schemas":{"AddRequestBody":{"type":"object","properties":{"action":{"type":"string","description":"Action name","example":"Ut suscipit cupiditate cumque ratione occaecati."},"parameters":{"type":"object","description":"Action parameters","example":{"In modi rerum eos ut veritatis.":"Architecto deleniti incidunt alias asperiores tempora quisquam."},"additionalProperties":true},"resource":{"type":"string","description":"Resource name","example":"Ipsum natus quasi quia."}},"example":{"action":"Consectetur optio sint.","parameters":{"Et molestiae soluta ut animi.":"Totam omnis molestiae."},"resource":"Inventore qui nihil nam."},"required":["resource","action"]},"AddVolumeRequestBody":{"type":"object","properties":{"path":{"type":"string","description":"path to backing storage","example":"Sed necessitatibus et asperiores."},"volume":{"type":"string","description":"volume identifier","example":"Repudiandae veniam vel provident quae."}},"example":{"path":"Animi fugiat excepturi sed.","volume":"Hic sequi."},"required":["volume","path"]},"CompleteRequestBody":{"type":"object","properties":{"id":{"type":"string","description":"Command ID","example":"Mollitia est aliquam."},"status":{"type":"boolean","description":"status of work","example":true},"status_reason":{"type":"string","description":"reason of success/failure","example":"Placeat quasi consequatur."}},"example":{"id":"Sed fugiat autem ut modi.","status":true,"status_reason":"Cum fugit."},"required":["id","status"]},"CreateImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Aut tempore aliquam."},"image_size":{"type":"integer","description":"image size in GB","example":743273099863973551},"volume":{"type":"string","description":"volume identifier","example":"Molestiae voluptates natus neque qui iusto ex."}},"example":{"image_name":"Doloremque saepe in.","image_size":16275436057995523110,"volume":"Eveniet repudiandae."},"required":["image_name","image_size","volume"]},"CreateRequestBody":{"type":"object","properties":{"cpus":{"type":"integer","description":"CPU count","example":11143353617441488753},"memory":{"type":"integer","description":"Memory (in megabytes)","example":12747505199075926605},"name":{"type":"string","description":"Name of VM; does not need to be unique","example":"Ea voluptas libero."},"storage":{"type":"array","items":{"$ref":"#/components/schemas/Storage"},"description":"Storage references","example":[{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."}]}},"example":{"cpus":17827013009450446609,"memory":16362411709500106300,"name":"Vero recusandae in.","storage":[{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."},{"image":"Expedita a.","image_size":13160086984666010830,"volume":"Et nobis quia neque excepturi."}]},"required":["name","cpus","memory","storage"]},"DeleteImageOnVolumeRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Perferendis impedit."},"volume":{"type":"string","description":"volume identifier","example":"Dolores reprehenderit quo ab iure."}},"example":{"image_name":"Voluptas non officiis.","volume":"Nostrum quia quisquam hic est quisquam."},"required":["image_name","volume"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":false}},"example":{"id":"3F1FKVRR","message":"Value of ID must be an integer","name":"bad_request"},"required":["name","id","message","temporary","timeout","fault"]},"MoveImageRequestBody":{"type":"object","properties":{"image_name":{"type":"string","description":"image name","example":"Quae incidunt nulla sit."},"target_volume":{"type":"string","description":"volume identifier to move to","example":"Odit tenetur cupiditate amet fugiat."},"volume":{"type":"string","description":"volume identifier","example":"Minima voluptas dolorem et corporis quo dolores."}},"example":{"image_name":"Sequi molestiae inventore aut consequatur officiis perspiciatis.","target_volume":"Eum laudantium tempora pariatur possimus autem.","volume":"Dolore voluptate voluptas veniam."},"required":["image_name","volume","target_volume"]},"NextResponseBody":{"type":"object","properties":{"action":{"type":"string","description":"action name","example":"Quidem aut et qui."},"parameters":{"type":"object","description":"parameters for action","example":{"Adipisci tempora.":"Eligendi id rerum hic.","In qui eaque omnis odio quia.":"Deserunt fuga omnis dignissimos.","Labore accusantium ut itaque odio explicabo perferendis.":"Totam quia sit."},"additionalProperties":true},"resource":{"type":"string","description":"resource type","example":"Quia culpa."},"uuid":{"type":"string","description":"Command ID","example":"Amet numquam sed totam accusantium minima."}},"example":{"action":"Autem ex tempora fugit adipisci aliquid aliquam.","parameters":{"Quia nemo.":"Alias vero non ut id aut dolores.","Sit earum harum aliquam nobis dicta.":"Optio quisquam dolores ut."},"resource":"Enim sequi soluta omnis.","uuid":"Soluta necessitatibus voluptas quae autem."},"required":["uuid","resource","action"]},"StatusResponseBody":{"type":"object","properties":{"reason":{"type":"string","description":"Failure reason (if any)","example":"Vel dicta consequuntur tempora dolorem quibusdam minus."},"status":{"type":"boolean","description":"Pass/Fail status","example":true}},"example":{"reason":"Et iusto fugit.","status":false},"required":["status"]},"Storage":{"type":"object","properties":{"image":{"type":"string","description":"Image filename, must not include `/`","example":"Veniam iusto sint."},"image_size":{"type":"integer","description":"Image size (in gigabytes)","example":9238686858427587457},"volume":{"type":"string","description":"Volume name, must not include `/`","example":"Ut ut optio nemo dolor doloremque similique."}},"example":{"image":"Nihil error.","image_size":9553031350616506869,"volume":"Recusandae unde sed."},"required":["volume","image","image_size"]}}}}