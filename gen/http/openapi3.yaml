openapi: 3.0.3
info:
  title: Spin API service
  description: HTTP service for controlling the spin service
  version: "1.0"
servers:
- url: http://localhost:8080
paths:
  /add/{id}:
    post:
      tags:
      - spin-broker
      summary: add spin-broker
      description: Add a command to the package
      operationId: spin-broker#add
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Sed expedita aspernatur illo eligendi modi.
        example: Voluptas sapiente ipsam.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddRequestBody'
            example:
              action: Nobis consequatur omnis.
              dependencies:
              - Non dicta quisquam rem qui.
              - Eius est reprehenderit dolor nesciunt omnis.
              - Ullam amet magnam.
              parameters:
                Voluptatem dignissimos ut doloremque harum et tempora.: Qui quia.
              resource: Iusto minima et labore.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: In qui eaque omnis odio quia.
              example: Omnis cum id asperiores ex id a.
  /complete:
    post:
      tags:
      - spin-broker
      summary: complete spin-broker
      description: Mark a command as completed with a result status
      operationId: spin-broker#complete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteRequestBody'
            example:
              id: Consequatur quo exercitationem occaecati magnam molestiae qui.
              status: true
              status_reason: Aut voluptas qui fuga unde.
      responses:
        "200":
          description: OK response.
  /control/shutdown/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control/shutdown spin-apiserver
      operationId: spin-apiserver#control/shutdown
      parameters:
      - name: id
        in: path
        description: ID of VM to shutdown
        required: true
        schema:
          type: integer
          description: ID of VM to shutdown
          example: 15737717293445607929
        example: 16471219320034655957
      responses:
        "200":
          description: OK response.
  /control/start/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control/start spin-apiserver
      operationId: spin-apiserver#control/start
      parameters:
      - name: id
        in: path
        description: ID of VM to start
        required: true
        schema:
          type: integer
          description: ID of VM to start
          example: 17631366753769681391
        example: 18257255936749339677
      responses:
        "200":
          description: OK response.
  /control/stop/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control/stop spin-apiserver
      operationId: spin-apiserver#control/stop
      parameters:
      - name: id
        in: path
        description: ID of VM to stop
        required: true
        schema:
          type: integer
          description: ID of VM to stop
          example: 625912574990977074
        example: 16461525508777654137
      responses:
        "200":
          description: OK response.
  /enqueue/{id}:
    post:
      tags:
      - spin-broker
      summary: enqueue spin-broker
      description: Enqueue the package into the various resource queues
      operationId: spin-broker#enqueue
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Id deleniti.
        example: Aut ex.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Deserunt fuga omnis dignissimos.
                example:
                - Necessitatibus voluptas quae autem illum enim.
                - Soluta omnis deleniti autem ex tempora fugit.
                - Aliquid aliquam vel sit sit.
                - Harum aliquam.
              example:
              - Et voluptatem deleniti distinctio rerum doloremque architecto.
              - Corrupti non optio minus repellendus.
  /new:
    post:
      tags:
      - spin-broker
      summary: new spin-broker
      description: Create a new package; a collection of items to join into the queue simultaneously
      operationId: spin-broker#new
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Vel in modi rerum.
              example: Deserunt et dolorem quis dolores laborum ut.
  /next/{resource}:
    get:
      tags:
      - spin-broker
      summary: next spin-broker
      description: Get the next command for a given resource
      operationId: spin-broker#next
      parameters:
      - name: resource
        in: path
        description: resource type
        required: true
        schema:
          type: string
          description: resource type
          example: Veniam rerum unde et impedit.
        example: Repellat quisquam atque debitis quos quisquam nobis.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NextResponseBody'
              example:
                action: Consequatur non ut hic assumenda assumenda.
                parameters:
                  Et quidem qui voluptate sunt itaque tenetur.: Quia distinctio aperiam nobis.
                  Repellendus eaque nesciunt quia.: Neque reiciendis ipsum.
                  Voluptatem minima natus non consequatur voluptatem.: Eos iste illum omnis suscipit.
                resource: Vero alias doloribus impedit impedit qui dolor.
                uuid: Consectetur et.
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /status/{id}:
    get:
      tags:
      - spin-broker
      summary: status spin-broker
      description: Get the status for a package
      operationId: spin-broker#status
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Quo est.
        example: Et quidem dicta vero.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusResponseBody'
              example:
                causer: Commodi error omnis quis quia.
                reason: Aut non dolorem voluptatibus.
                status: true
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /storage/images/create:
    post:
      tags:
      - spin-registry
      summary: storage/images/create spin-registry
      description: add an image definition to the registry
      operationId: spin-registry#storage/images/create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Storage'
            example:
              cdrom: false
              image: Aut adipisci.
              image_size: 10642461641015261973
              volume: Quia reprehenderit vitae.
      responses:
        "200":
          description: OK response.
  /storage/images/delete:
    post:
      tags:
      - spin-registry
      summary: storage/images/delete spin-registry
      description: remove an image definition from the registry
      operationId: spin-registry#storage/images/delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesDeleteRequestBody'
            example:
              image_name: Cupiditate veniam atque accusamus.
              volume_name: Id et alias vel ratione.
      responses:
        "200":
          description: OK response.
  /storage/images/get:
    get:
      tags:
      - spin-registry
      summary: storage/images/get spin-registry
      description: retrieves an image definition from the registry
      operationId: spin-registry#storage/images/get
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesDeleteRequestBody'
            example:
              image_name: Quia aliquam sit necessitatibus pariatur quam deleniti.
              volume_name: Et ipsa.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Storage'
              example:
                cdrom: false
                image: Facilis ad quod.
                image_size: 3125227826537767074
                volume: Ut ea excepturi.
  /storage/images/list:
    get:
      tags:
      - spin-registry
      summary: storage/images/list spin-registry
      description: list all images by volume
      operationId: spin-registry#storage/images/list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesListRequestBody'
            example:
              volume_name: Dolores nihil autem dolorem soluta.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Hic unde assumenda praesentium similique.
                example:
                - Nihil dicta optio voluptatem veniam fugit in.
                - Repellat cupiditate odit commodi veniam corrupti.
              example:
              - Minus neque corporis omnis corporis sunt.
              - Sunt suscipit et laudantium natus sed et.
              - Minima quo enim et tenetur autem.
  /storage/volumes/create:
    post:
      tags:
      - spin-registry
      summary: storage/volumes/create spin-registry
      description: create a new volume
      operationId: spin-registry#storage/volumes/create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesCreateRequestBody'
            example:
              name: Expedita a.
      responses:
        "200":
          description: OK response.
  /storage/volumes/delete:
    post:
      tags:
      - spin-registry
      summary: storage/volumes/delete spin-registry
      description: delete an existing volume
      operationId: spin-registry#storage/volumes/delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesCreateRequestBody'
            example:
              name: Similique corrupti ab soluta vel qui vel.
      responses:
        "200":
          description: OK response.
  /storage/volumes/list:
    get:
      tags:
      - spin-registry
      summary: storage/volumes/list spin-registry
      description: list all volumes
      operationId: spin-registry#storage/volumes/list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Non qui voluptate.
                example:
                - Qui doloremque accusantium.
                - Corporis occaecati aut adipisci officia.
                - Reprehenderit consequuntur inventore.
              example:
              - Nemo expedita.
              - Rerum id dolor.
              - Reiciendis maxime.
  /vm/create:
    post:
      tags:
      - spin-registry
      summary: vm/create spin-registry
      description: Create a VM
      operationId: spin-registry#vm/create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VMCreateRequestBody'
            example:
              cpus: 10996383488550437060
              memory: 9896149697376370528
              name: Molestias eum voluptatem qui nihil officia.
              storage:
              - cdrom: false
                image: Sint eveniet hic minus facere.
                image_size: 12121496662175385537
                volume: Eum repellat earum.
              - cdrom: false
                image: Sint eveniet hic minus facere.
                image_size: 12121496662175385537
                volume: Eum repellat earum.
              - cdrom: false
                image: Sint eveniet hic minus facere.
                image_size: 12121496662175385537
                volume: Eum repellat earum.
              - cdrom: false
                image: Sint eveniet hic minus facere.
                image_size: 12121496662175385537
                volume: Eum repellat earum.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: integer
                example: 12830326224570916695
              example: 8567173534106073899
  /vm/delete/{id}:
    post:
      tags:
      - spin-registry
      summary: vm/delete spin-registry
      description: Delete a VM by ID
      operationId: spin-registry#vm/delete
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 12746600810472070772
        example: 9760923142528330278
      responses:
        "200":
          description: OK response.
  /vm/get/{id}:
    get:
      tags:
      - spin-registry
      summary: vm/get spin-registry
      description: Retrieve a VM by ID
      operationId: spin-registry#vm/get
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 12166500671289702038
        example: 17677275557887550468
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VMCreateRequestBody'
              example:
                cpus: 17282559062464782597
                memory: 8351098711286704476
                name: Voluptas perferendis ea iusto.
                storage:
                - cdrom: false
                  image: Sint rerum rerum porro eius.
                  image_size: 2074460472560899620
                  volume: Et dicta.
                - cdrom: false
                  image: Sint rerum rerum porro eius.
                  image_size: 2074460472560899620
                  volume: Et dicta.
                - cdrom: false
                  image: Sint rerum rerum porro eius.
                  image_size: 2074460472560899620
                  volume: Et dicta.
                - cdrom: false
                  image: Sint rerum rerum porro eius.
                  image_size: 2074460472560899620
                  volume: Et dicta.
  /vm/list:
    get:
      tags:
      - spin-registry
      summary: vm/list spin-registry
      description: Retrieve all VM IDs
      operationId: spin-registry#vm/list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                  example: 15734790415554286079
                example:
                - 1666741356156718967
                - 8896627392473908166
                - 11079545058953254517
              example:
              - 3963619224883884247
              - 12140595434365798753
              - 12059170445167169151
              - 1705727486703064453
  /vm/update/{id}:
    post:
      tags:
      - spin-registry
      summary: vm/update spin-registry
      description: Update a VM
      operationId: spin-registry#vm/update
      parameters:
      - name: id
        in: path
        description: ID of VM to update
        required: true
        schema:
          type: integer
          description: ID of VM to update
          example: 6613162473402516256
        example: 9210167212514213541
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VMUpdateRequestBody'
            example:
              vm:
                cpus: 17947092167867694340
                memory: 17643772877660978986
                name: Minima cum delectus occaecati enim.
                storage:
                - cdrom: false
                  image: Sint eveniet hic minus facere.
                  image_size: 12121496662175385537
                  volume: Eum repellat earum.
                - cdrom: false
                  image: Sint eveniet hic minus facere.
                  image_size: 12121496662175385537
                  volume: Eum repellat earum.
      responses:
        "200":
          description: OK response.
components:
  schemas:
    AddRequestBody:
      type: object
      properties:
        action:
          type: string
          description: Action name
          example: Deleniti incidunt.
        dependencies:
          type: array
          items:
            type: string
            example: Sint et nesciunt et molestiae soluta ut.
          description: Dependency UUIDs
          example:
          - Totam omnis molestiae.
          - Rerum libero quas.
          - Tempore iste voluptatem est.
          - Deserunt blanditiis consequatur consequuntur praesentium consequatur.
        parameters:
          type: object
          description: Action parameters
          example:
            Tempora quisquam inventore inventore qui nihil.: Natus consectetur.
          additionalProperties: true
        resource:
          type: string
          description: Resource name
          example: Ut veritatis aut.
      example:
        action: Accusantium labore.
        dependencies:
        - Accusantium ut itaque odio explicabo perferendis quaerat.
        - Quia sit cum adipisci tempora qui eligendi.
        - Rerum hic.
        parameters:
          Ab nulla quis exercitationem voluptatem.: Dicta consequuntur tempora.
          Minima omnis.: Culpa ut quidem aut et qui porro.
          Quibusdam minus expedita doloremque et iusto fugit.: Similique aliquid corrupti amet numquam sed totam.
        resource: Sunt iusto harum.
      required:
      - resource
      - action
    CompleteRequestBody:
      type: object
      properties:
        id:
          type: string
          description: Command ID
          example: Quos maxime ut error facilis modi autem.
        status:
          type: boolean
          description: status of work
          example: false
        status_reason:
          type: string
          description: reason of success/failure
          example: Nam aut deserunt modi qui.
      example:
        id: Placeat rem ullam.
        status: false
        status_reason: At ut veritatis expedita voluptatem reiciendis.
      required:
      - id
      - status
    Error:
      type: object
      properties:
        fault:
          type: boolean
          description: Is the error a server-side fault?
          example: true
        id:
          type: string
          description: ID is a unique identifier for this particular occurrence of the problem.
          example: 123abc
        message:
          type: string
          description: Message is a human-readable explanation specific to this occurrence of the problem.
          example: parameter 'p' must be an integer
        name:
          type: string
          description: Name is the name of this class of errors.
          example: bad_request
        temporary:
          type: boolean
          description: Is the error temporary?
          example: true
        timeout:
          type: boolean
          description: Is the error a timeout?
          example: true
      example:
        id: 3F1FKVRR
        message: Value of ID must be an integer
        name: bad_request
      required:
      - name
      - id
      - message
      - temporary
      - timeout
      - fault
    NextResponseBody:
      type: object
      properties:
        action:
          type: string
          description: action name
          example: Fugit facere.
        parameters:
          type: object
          description: Action parameters
          example:
            Libero ea repudiandae.: Ut ut optio nemo dolor doloremque similique.
            Veniam iusto sint.: Voluptatem recusandae unde.
          additionalProperties: true
        resource:
          type: string
          description: resource type
          example: Ut modi sint quo.
        uuid:
          type: string
          description: Command ID
          example: Consequatur ut sed fugiat.
      example:
        action: Voluptas omnis asperiores qui.
        parameters:
          Est nulla eum.: Cupiditate neque eos aperiam.
          Sunt doloremque.: Sint ut perspiciatis.
        resource: In voluptas laborum corrupti magnam quis.
        uuid: Commodi nihil error ipsum minima fugit vero.
      required:
      - uuid
      - resource
      - action
    StatusResponseBody:
      type: object
      properties:
        causer:
          type: string
          description: Failure causer as UUID (if any)
          example: Dolores ut est quia nemo suscipit alias.
        reason:
          type: string
          description: Failure reason (if any)
          example: Dignissimos optio.
        status:
          type: boolean
          description: Pass/Fail status
          example: false
      example:
        causer: Mollitia est aliquam.
        reason: Ut id aut dolores.
        status: true
      required:
      - status
    Storage:
      type: object
      properties:
        cdrom:
          type: boolean
          description: Is this image a cdrom?
          example: true
        image:
          type: string
          description: Image filename, must not include `/`
          example: Fugiat distinctio eveniet assumenda temporibus.
        image_size:
          type: integer
          description: Image size (in gigabytes)
          example: 7475481607211065162
        volume:
          type: string
          description: Volume name, must not include `/`
          example: Quam non.
      example:
        cdrom: false
        image: Officiis accusamus rerum facilis architecto.
        image_size: 3343293614547310319
        volume: Eos repudiandae et vel corporis rerum.
      required:
      - volume
      - image
    StorageImagesDeleteRequestBody:
      type: object
      properties:
        image_name:
          type: string
          description: name of image
          example: Molestiae voluptatem quos inventore aut.
        volume_name:
          type: string
          description: name of volume
          example: Consequatur eos aut laborum at.
      example:
        image_name: Sed ducimus ratione doloremque molestias enim architecto.
        volume_name: Eaque perferendis et quisquam odio.
      required:
      - volume_name
      - image_name
    StorageImagesListRequestBody:
      type: object
      properties:
        volume_name:
          type: string
          description: name of volume to list images for
          example: Et et.
      example:
        volume_name: Officiis officiis.
      required:
      - volume_name
    StorageVolumesCreateRequestBody:
      type: object
      properties:
        name:
          type: string
          description: name of volume
          example: Tempora est delectus et quia.
      example:
        name: Magnam officia quaerat ex vel ipsum.
      required:
      - name
    VMCreateRequestBody:
      type: object
      properties:
        cpus:
          type: integer
          description: CPU count
          example: 7819193585994109174
        memory:
          type: integer
          description: Memory (in megabytes)
          example: 17548902581020933760
        name:
          type: string
          description: Name of VM; does not need to be unique
          example: Dicta iusto tenetur qui ipsa et.
        storage:
          type: array
          items:
            $ref: '#/components/schemas/Storage'
          description: Storage references
          example:
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
      example:
        cpus: 1906345358335974737
        memory: 1395793963163251560
        name: Ea et minima.
        storage:
        - cdrom: false
          image: Sint eveniet hic minus facere.
          image_size: 12121496662175385537
          volume: Eum repellat earum.
        - cdrom: false
          image: Sint eveniet hic minus facere.
          image_size: 12121496662175385537
          volume: Eum repellat earum.
      required:
      - name
      - cpus
      - memory
      - storage
    VMUpdateRequestBody:
      type: object
      properties:
        vm:
          $ref: '#/components/schemas/VMCreateRequestBody'
      example:
        vm:
          cpus: 17947092167867694340
          memory: 17643772877660978986
          name: Minima cum delectus occaecati enim.
          storage:
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
          - cdrom: false
            image: Sint eveniet hic minus facere.
            image_size: 12121496662175385537
            volume: Eum repellat earum.
      required:
      - vm
