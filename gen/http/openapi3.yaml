openapi: 3.0.3
info:
  title: Spin API service
  description: HTTP service for controlling the spin service
  version: "1.0"
servers:
- url: http://localhost:8080
paths:
  /add/{id}:
    post:
      tags:
      - spin-broker
      summary: add spin-broker
      description: Add a command to the package
      operationId: spin-broker#add
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Eum nihil dicta optio.
        example: Veniam fugit in.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddRequestBody'
            example:
              action: Mollitia natus temporibus fugit occaecati ipsum qui.
              parameters:
                Aut molestiae deleniti ad dolorem.: Rerum quam adipisci est incidunt sequi.
              resource: Possimus velit quod sit.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Accusantium labore.
              example: Repellat cupiditate odit commodi veniam corrupti.
  /complete:
    post:
      tags:
      - spin-broker
      summary: complete spin-broker
      description: Mark a command as completed with a result status
      operationId: spin-broker#complete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteRequestBody'
            example:
              id: Aut vero amet quia quis.
              status: true
              status_reason: Est et dicta id.
      responses:
        "200":
          description: OK response.
  /enqueue/{id}:
    post:
      tags:
      - spin-broker
      summary: enqueue spin-broker
      description: Enqueue the package into the various resource queues
      operationId: spin-broker#enqueue
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Consequatur eos aut laborum at.
        example: Molestiae voluptatem quos inventore aut.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Corporis ab nulla quis.
                example:
                - Vel dicta consequuntur tempora dolorem quibusdam minus.
                - Doloremque et iusto.
                - Aut similique aliquid.
                - Amet numquam sed totam accusantium minima.
              example:
              - Perferendis et.
              - Odio eum sed ducimus.
              - Doloremque molestias enim architecto error.
              - Et dolorem quis dolores laborum.
  /new:
    post:
      tags:
      - spin-broker
      summary: new spin-broker
      description: Create a new package; a collection of items to join into the queue simultaneously
      operationId: spin-broker#new
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Vel in modi rerum.
              example: Hic unde assumenda praesentium similique.
  /next/{resource}:
    get:
      tags:
      - spin-broker
      summary: next spin-broker
      description: Get the next command for a given resource
      operationId: spin-broker#next
      parameters:
      - name: resource
        in: path
        description: resource type
        required: true
        schema:
          type: string
          description: resource type
          example: Omnis cum id asperiores ex id a.
        example: Id deleniti.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NextResponseBody'
              example:
                action: Corporis sit non sit recusandae eum repellat.
                parameters:
                  Sint eveniet hic minus facere.: Quas tempora nisi aperiam occaecati deserunt qui.
                  Temporibus esse reprehenderit qui molestias.: Voluptatem qui nihil officia.
                  Vel vel illum voluptatem voluptatibus.: Minima cum delectus occaecati enim.
                resource: Unde inventore cupiditate soluta.
                uuid: Iure aut voluptas qui.
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /status/{id}:
    get:
      tags:
      - spin-broker
      summary: status spin-broker
      description: Get the status for a package
      operationId: spin-broker#status
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Voluptatem sed expedita aspernatur illo eligendi modi.
        example: Voluptas sapiente ipsam.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusResponseBody'
              example:
                causer: Nesciunt quia.
                reason: Illum omnis suscipit illum repellendus.
                status: false
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /storage/volume/add:
    post:
      tags:
      - spin-apiserver
      summary: add_volume spin-apiserver
      description: Add a volume for image allocation with backing storage, and name it
      operationId: spin-apiserver#add_volume
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddVolumeRequestBody'
            example:
              path: Vitae sunt amet nostrum amet.
              volume: Ipsam dolor distinctio.
      responses:
        "200":
          description: OK response.
  /storage/volume/image/create:
    post:
      tags:
      - spin-apiserver
      summary: create_image_on_volume spin-apiserver
      description: Create an image on a volume
      operationId: spin-apiserver#create_image_on_volume
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateImageOnVolumeRequestBody'
            example:
              image_name: Nobis consequatur omnis.
              image_size: 3714898167546230205
              volume: Voluptatem dignissimos ut doloremque harum et tempora.
      responses:
        "200":
          description: OK response.
  /storage/volume/image/delete:
    post:
      tags:
      - spin-apiserver
      summary: delete_image_on_volume spin-apiserver
      description: Delete an image on a volume
      operationId: spin-apiserver#delete_image_on_volume
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteImageOnVolumeRequestBody'
            example:
              image_name: Qui quia.
              volume: Aut non dicta quisquam rem qui ut.
      responses:
        "200":
          description: OK response.
  /storage/volume/image/info/{volume}/{image_name}:
    get:
      tags:
      - spin-apiserver
      summary: info_image_on_volume spin-apiserver
      description: Obtain information on an image
      operationId: spin-apiserver#info_image_on_volume
      parameters:
      - name: volume
        in: path
        description: volume identifier
        required: true
        schema:
          type: string
          description: volume identifier
          example: Facere reprehenderit consequuntur inventore reiciendis tempora est.
        example: Et quia consequatur magnam officia.
      - name: image_name
        in: path
        description: image name
        required: true
        schema:
          type: string
          description: image name
          example: Ex vel ipsum autem et et.
        example: Officiis officiis.
      responses:
        "200":
          description: OK response.
  /storage/volume/image/move:
    post:
      tags:
      - spin-apiserver
      summary: move_image spin-apiserver
      description: Move an image from one volume to another
      operationId: spin-apiserver#move_image
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveImageRequestBody'
            example:
              image_name: Id et autem ut debitis.
              target_volume: Quaerat itaque aut.
              volume: Saepe occaecati impedit quas laborum.
      responses:
        "200":
          description: OK response.
  /storage/volume/image/resize:
    post:
      tags:
      - spin-apiserver
      summary: resize_image_on_volume spin-apiserver
      description: Resize an image on a volume
      operationId: spin-apiserver#resize_image_on_volume
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateImageOnVolumeRequestBody'
            example:
              image_name: Est reprehenderit.
              image_size: 16763155016610482941
              volume: Omnis voluptatem ullam amet magnam.
      responses:
        "200":
          description: OK response.
  /storage/volume/info/{volume}:
    get:
      tags:
      - spin-apiserver
      summary: info_volume spin-apiserver
      description: Get information on a volume
      operationId: spin-apiserver#info_volume
      parameters:
      - name: volume
        in: path
        description: volume identifier
        required: true
        schema:
          type: string
          description: volume identifier
          example: Tempora fugit qui doloremque.
        example: Eius corporis occaecati aut adipisci.
      responses:
        "200":
          description: OK response.
  /storage/volume/remove/{volume}:
    post:
      tags:
      - spin-apiserver
      summary: remove_volume spin-apiserver
      description: Remove a volume. Requires all images to be removed.
      operationId: spin-apiserver#remove_volume
      parameters:
      - name: volume
        in: path
        description: volume identifier
        required: true
        schema:
          type: string
          description: volume identifier
          example: Enim et aut.
        example: Reprehenderit dolorum non qui.
      responses:
        "200":
          description: OK response.
  /storage/volumes/create:
    post:
      tags:
      - spin-registry
      summary: storage/volumes/create spin-registry
      description: create a new volume
      operationId: spin-registry#storage/volumes/create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesCreateRequestBody'
            example:
              name: Quia reprehenderit vitae.
      responses:
        "200":
          description: OK response.
  /storage/volumes/delete:
    post:
      tags:
      - spin-registry
      summary: storage/volumes/delete spin-registry
      description: delete an existing volume
      operationId: spin-registry#storage/volumes/delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesCreateRequestBody'
            example:
              name: Aut adipisci.
      responses:
        "200":
          description: OK response.
  /storage/volumes/list:
    get:
      tags:
      - spin-registry
      summary: storage/volumes/list spin-registry
      description: list all volumes
      operationId: spin-registry#storage/volumes/list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Repudiandae et vel corporis rerum molestias.
                example:
                - Rerum facilis.
                - In temporibus.
              example:
              - Corrupti non optio minus repellendus.
              - Quo est.
              - Et quidem dicta vero.
  /vm/create:
    post:
      tags:
      - spin-registry
      summary: vm/create spin-registry
      description: Create a VM
      operationId: spin-registry#vm/create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VMCreateRequestBody'
            example:
              cpus: 2074460472560899620
              memory: 5284076406166230851
              name: Rerum rerum porro eius.
              storage:
              - cdrom: true
                image: Aut minima recusandae et.
                image_size: 4597833110689897909
                volume: Perferendis ea iusto adipisci sapiente temporibus.
              - cdrom: true
                image: Aut minima recusandae et.
                image_size: 4597833110689897909
                volume: Perferendis ea iusto adipisci sapiente temporibus.
              - cdrom: true
                image: Aut minima recusandae et.
                image_size: 4597833110689897909
                volume: Perferendis ea iusto adipisci sapiente temporibus.
              - cdrom: true
                image: Aut minima recusandae et.
                image_size: 4597833110689897909
                volume: Perferendis ea iusto adipisci sapiente temporibus.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: integer
                example: 14595569237607633229
              example: 4082317100578603508
  /vm/delete/{id}:
    post:
      tags:
      - spin-registry
      summary: vm/delete spin-registry
      description: Delete a VM by ID
      operationId: spin-registry#vm/delete
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 276325523525387340
        example: 9176697114519538264
      responses:
        "200":
          description: OK response.
  /vm/get/{id}:
    get:
      tags:
      - spin-registry
      summary: vm/get spin-registry
      description: Retrieve a VM by ID
      operationId: spin-registry#vm/get
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 15472419377577377155
        example: 6292995355944751212
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VMCreateRequestBody'
              example:
                cpus: 17043342971635177953
                memory: 2551606264180670795
                name: Rem et nobis.
                storage:
                - cdrom: false
                  image: Nihil vitae nesciunt.
                  image_size: 11176502060165847513
                  volume: Consectetur adipisci quia.
                - cdrom: false
                  image: Nihil vitae nesciunt.
                  image_size: 11176502060165847513
                  volume: Consectetur adipisci quia.
                - cdrom: false
                  image: Nihil vitae nesciunt.
                  image_size: 11176502060165847513
                  volume: Consectetur adipisci quia.
  /vm/list:
    get:
      tags:
      - spin-registry
      summary: vm/list spin-registry
      description: Retrieve all VM IDs
      operationId: spin-registry#vm/list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                  example: 7091906110773011240
                example:
                - 7475481607211065162
                - 10962833320592094436
                - 8598373107254708028
              example:
              - 4308838453970776741
              - 10485350282088333599
              - 14639071270813357845
  /vm/update/{id}:
    post:
      tags:
      - spin-registry
      summary: vm/update spin-registry
      description: Update a VM
      operationId: spin-registry#vm/update
      parameters:
      - name: id
        in: path
        description: ID of VM to update
        required: true
        schema:
          type: integer
          description: ID of VM to update
          example: 4648633204157854795
        example: 14910483328256100781
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VMUpdateRequestBody'
            example:
              vm:
                cpus: 6259074207733349285
                memory: 3262028922579224625
                name: Modi magni voluptas corrupti.
                storage:
                - cdrom: true
                  image: Aut minima recusandae et.
                  image_size: 4597833110689897909
                  volume: Perferendis ea iusto adipisci sapiente temporibus.
                - cdrom: true
                  image: Aut minima recusandae et.
                  image_size: 4597833110689897909
                  volume: Perferendis ea iusto adipisci sapiente temporibus.
                - cdrom: true
                  image: Aut minima recusandae et.
                  image_size: 4597833110689897909
                  volume: Perferendis ea iusto adipisci sapiente temporibus.
      responses:
        "200":
          description: OK response.
components:
  schemas:
    AddRequestBody:
      type: object
      properties:
        action:
          type: string
          description: Action name
          example: Deleniti incidunt.
        parameters:
          type: object
          description: Action parameters
          example:
            Tempora quisquam inventore inventore qui nihil.: Natus consectetur.
          additionalProperties: true
        resource:
          type: string
          description: Resource name
          example: Ut veritatis aut.
      example:
        action: Dolorem totam omnis molestiae.
        parameters:
          Deserunt blanditiis consequatur consequuntur praesentium consequatur.: Sunt iusto harum.
          Libero quas.: Tempore iste voluptatem est.
        resource: Sint et nesciunt et molestiae soluta ut.
      required:
      - resource
      - action
    AddVolumeRequestBody:
      type: object
      properties:
        path:
          type: string
          description: path to backing storage
          example: Qui iusto ex.
        volume:
          type: string
          description: volume identifier
          example: Illum molestiae voluptates natus.
      example:
        path: Reiciendis eveniet repudiandae reiciendis perferendis impedit reiciendis.
        volume: Doloremque saepe in.
      required:
      - volume
      - path
    CompleteRequestBody:
      type: object
      properties:
        id:
          type: string
          description: Command ID
          example: Voluptas omnis asperiores qui.
        status:
          type: boolean
          description: status of work
          example: false
        status_reason:
          type: string
          description: reason of success/failure
          example: Est nulla eum.
      example:
        id: Cupiditate neque eos aperiam.
        status: false
        status_reason: Doloremque amet sint.
      required:
      - id
      - status
    CreateImageOnVolumeRequestBody:
      type: object
      properties:
        image_name:
          type: string
          description: image name
          example: Reprehenderit quo ab iure nihil.
        image_size:
          type: integer
          description: image size in GB
          example: 16407373559890724020
        volume:
          type: string
          description: volume identifier
          example: Officiis molestiae.
      example:
        image_name: Quia quisquam hic est quisquam.
        image_size: 8253244429229271113
        volume: Incidunt nulla sit magni minima voluptas dolorem.
      required:
      - image_name
      - image_size
      - volume
    DeleteImageOnVolumeRequestBody:
      type: object
      properties:
        image_name:
          type: string
          description: image name
          example: Corporis quo.
        volume:
          type: string
          description: volume identifier
          example: Rerum odit.
      example:
        image_name: Cupiditate amet.
        volume: Sapiente sequi molestiae inventore aut.
      required:
      - image_name
      - volume
    Error:
      type: object
      properties:
        fault:
          type: boolean
          description: Is the error a server-side fault?
          example: true
        id:
          type: string
          description: ID is a unique identifier for this particular occurrence of the problem.
          example: 123abc
        message:
          type: string
          description: Message is a human-readable explanation specific to this occurrence of the problem.
          example: parameter 'p' must be an integer
        name:
          type: string
          description: Name is the name of this class of errors.
          example: bad_request
        temporary:
          type: boolean
          description: Is the error temporary?
          example: false
        timeout:
          type: boolean
          description: Is the error a timeout?
          example: true
      example:
        id: 3F1FKVRR
        message: Value of ID must be an integer
        name: bad_request
      required:
      - name
      - id
      - message
      - temporary
      - timeout
      - fault
    MoveImageRequestBody:
      type: object
      properties:
        image_name:
          type: string
          description: image name
          example: Officiis perspiciatis.
        target_volume:
          type: string
          description: volume identifier to move to
          example: Eum laudantium tempora pariatur possimus autem.
        volume:
          type: string
          description: volume identifier
          example: Dolore voluptate voluptas veniam.
      example:
        image_name: Qui ad aut possimus quisquam harum.
        target_volume: Ut suscipit cupiditate cumque ratione occaecati.
        volume: Ipsum natus quasi quia.
      required:
      - image_name
      - volume
      - target_volume
    NextResponseBody:
      type: object
      properties:
        action:
          type: string
          description: action name
          example: Voluptas quae autem illum enim sequi soluta.
        parameters:
          type: object
          description: Action parameters
          example:
            Aliquam nobis dicta dignissimos optio quisquam.: Ut est quia nemo suscipit.
            Autem ex tempora fugit adipisci aliquid aliquam.: Sit sit earum.
            Vero non ut id aut.: Quod mollitia est aliquam libero.
          additionalProperties: true
        resource:
          type: string
          description: resource type
          example: Omnis dignissimos nihil soluta.
        uuid:
          type: string
          description: Command ID
          example: Omnis odio quia voluptas deserunt.
      example:
        action: Quo cum fugit facere ea voluptas libero.
        parameters:
          Commodi nihil error ipsum minima fugit vero.: In voluptas laborum corrupti magnam quis.
          Illum ut ut optio.: Dolor doloremque similique.
          Veniam iusto sint.: Voluptatem recusandae unde.
        resource: Sed fugiat autem ut modi.
        uuid: Placeat quasi consequatur.
      required:
      - uuid
      - resource
      - action
    StatusResponseBody:
      type: object
      properties:
        causer:
          type: string
          description: Failure causer as UUID (if any)
          example: Labore accusantium ut itaque odio explicabo perferendis.
        reason:
          type: string
          description: Failure reason (if any)
          example: Culpa ut quidem aut et qui porro.
        status:
          type: boolean
          description: Pass/Fail status
          example: true
      example:
        causer: Rerum hic.
        reason: Quia sit cum adipisci tempora qui eligendi.
        status: false
      required:
      - status
    Storage:
      type: object
      properties:
        cdrom:
          type: boolean
          description: Is this image a cdrom?
          example: false
        image:
          type: string
          description: Image filename, must not include `/`
          example: Nam aut deserunt modi qui.
        image_size:
          type: integer
          description: Image size (in gigabytes)
          example: 11290861263935462708
        volume:
          type: string
          description: Volume name, must not include `/`
          example: Facilis modi autem adipisci.
      example:
        cdrom: true
        image: Expedita voluptatem reiciendis voluptatem dicta.
        image_size: 13544215858726231493
        volume: Ullam dolore ea at ut.
      required:
      - volume
      - image
    StorageVolumesCreateRequestBody:
      type: object
      properties:
        name:
          type: string
          description: name of volume
          example: Odio ea.
      example:
        name: Minima cum quae voluptas et.
      required:
      - name
    VMCreateRequestBody:
      type: object
      properties:
        cpus:
          type: integer
          description: CPU count
          example: 11871181014446295000
        memory:
          type: integer
          description: Memory (in megabytes)
          example: 3132275377477676152
        name:
          type: string
          description: Name of VM; does not need to be unique
          example: Perspiciatis impedit quos.
        storage:
          type: array
          items:
            $ref: '#/components/schemas/Storage'
          description: Storage references
          example:
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
      example:
        cpus: 11646093893906804794
        memory: 5177813403209295564
        name: Et magnam sed iusto quam non.
        storage:
        - cdrom: true
          image: Aut minima recusandae et.
          image_size: 4597833110689897909
          volume: Perferendis ea iusto adipisci sapiente temporibus.
        - cdrom: true
          image: Aut minima recusandae et.
          image_size: 4597833110689897909
          volume: Perferendis ea iusto adipisci sapiente temporibus.
      required:
      - name
      - cpus
      - memory
      - storage
    VMUpdateRequestBody:
      type: object
      properties:
        vm:
          $ref: '#/components/schemas/VMCreateRequestBody'
      example:
        vm:
          cpus: 6259074207733349285
          memory: 3262028922579224625
          name: Modi magni voluptas corrupti.
          storage:
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
          - cdrom: true
            image: Aut minima recusandae et.
            image_size: 4597833110689897909
            volume: Perferendis ea iusto adipisci sapiente temporibus.
      required:
      - vm
