openapi: 3.0.3
info:
  title: Spin API service
  description: HTTP service for controlling the spin service
  version: "1.0"
servers:
- url: http://localhost:8080
paths:
  /add/{id}:
    post:
      tags:
      - spin-broker
      summary: add spin-broker
      description: Add a command to the package
      operationId: spin-broker#add
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Est quia temporibus nam ex incidunt.
        example: Est omnis perferendis quia veritatis.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddRequestBody'
            example:
              action: Deserunt vitae rerum illum sint.
              dependencies:
              - Et autem ut debitis dolores.
              - Occaecati impedit quas laborum consequatur.
              parameters:
                Odio tenetur aliquid consequatur.: Quam neque.
              resource: Magnam sint ad ut nulla laboriosam.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Corporis nam.
              example: Est illo.
  /complete:
    post:
      tags:
      - spin-broker
      summary: complete spin-broker
      description: Mark a command as completed with a result status
      operationId: spin-broker#complete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteRequestBody'
            example:
              id: Iure aut voluptas qui.
              status: true
              status_reason: Inventore cupiditate soluta ut corporis sit.
      responses:
        "200":
          description: OK response.
  /control/shutdown/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control_shutdown spin-apiserver
      operationId: spin-apiserver#control_shutdown
      parameters:
      - name: id
        in: path
        description: ID of VM to shutdown
        required: true
        schema:
          type: integer
          description: ID of VM to shutdown
          example: 8512129260133912932
        example: 2346302208798220806
      responses:
        "200":
          description: OK response.
  /control/start/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control_start spin-apiserver
      operationId: spin-apiserver#control_start
      parameters:
      - name: id
        in: path
        description: ID of VM to start
        required: true
        schema:
          type: integer
          description: ID of VM to start
          example: 11504023300924780376
        example: 5900178842363226549
      responses:
        "200":
          description: OK response.
  /control/stop/{id}:
    post:
      tags:
      - spin-apiserver
      summary: control_stop spin-apiserver
      operationId: spin-apiserver#control_stop
      parameters:
      - name: id
        in: path
        description: ID of VM to stop
        required: true
        schema:
          type: integer
          description: ID of VM to stop
          example: 7651331666239781001
        example: 8980259321747298768
      responses:
        "200":
          description: OK response.
  /enqueue/{id}:
    post:
      tags:
      - spin-broker
      summary: enqueue spin-broker
      description: Enqueue the package into the various resource queues
      operationId: spin-broker#enqueue
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Cumque ab officiis veniam et.
        example: Sit dolores sunt repudiandae quas assumenda voluptatem.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Deserunt modi qui voluptatem placeat.
                example:
                - Dolore ea at ut veritatis expedita voluptatem.
                - Voluptatem dicta.
                - Tenetur qui.
                - Et magnam sed iusto quam non.
              example:
              - Dolores quod ipsam.
              - Quisquam incidunt placeat perferendis.
              - Aspernatur voluptate aspernatur dolor.
              - Hic veniam fuga enim.
  /new:
    post:
      tags:
      - spin-broker
      summary: new spin-broker
      description: Create a new package; a collection of items to join into the queue simultaneously
      operationId: spin-broker#new
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Deserunt fuga omnis dignissimos.
              example: Ut vitae a non illum modi.
  /next/{resource}:
    get:
      tags:
      - spin-broker
      summary: next spin-broker
      description: Get the next command for a given resource
      operationId: spin-broker#next
      parameters:
      - name: resource
        in: path
        description: resource type
        required: true
        schema:
          type: string
          description: resource type
          example: Mollitia facilis.
        example: Soluta a sit nihil voluptas ea ea.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NextResponseBody'
              example:
                action: Illum repellendus eaque nesciunt.
                parameters:
                  Neque reiciendis ipsum.: Consequatur quo exercitationem occaecati magnam molestiae qui.
                resource: Iste illum omnis.
                uuid: Natus non consequatur voluptatem nostrum.
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /status/{id}:
    get:
      tags:
      - spin-broker
      summary: status spin-broker
      description: Get the status for a package
      operationId: spin-broker#status
      parameters:
      - name: id
        in: path
        description: Package ID
        required: true
        schema:
          type: string
          description: Package ID
          example: Dolor in fuga veritatis debitis dolores rerum.
        example: Eligendi dolor non vitae.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusResponseBody'
              example:
                causer: Assumenda ullam qui et.
                reason: Non ut hic.
                status: false
        "400":
          description: No records were found
          content:
            application/vnd.goa.error:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: 3F1FKVRR
                message: Value of ID must be an integer
                name: bad_request
  /storage/images/create:
    post:
      tags:
      - spin-registry
      summary: storage_images_create spin-registry
      description: add an image definition to the registry
      operationId: spin-registry#storage_images_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Storage'
            example:
              cdrom: true
              image: Quia facere.
              image_size: 8415715876711929459
              volume: Facilis ad quod.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
              example:
                cdrom: true
                path: Natus dolorem.
                volume: Tempora est optio.
  /storage/images/delete:
    post:
      tags:
      - spin-registry
      summary: storage_images_delete spin-registry
      description: remove an image definition from the registry
      operationId: spin-registry#storage_images_delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesDeleteRequestBody'
            example:
              image_name: Fugit incidunt tempora.
              volume_name: Aut quis vel officia.
      responses:
        "200":
          description: OK response.
  /storage/images/get:
    get:
      tags:
      - spin-registry
      summary: storage_images_get spin-registry
      description: retrieves an image definition from the registry
      operationId: spin-registry#storage_images_get
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesDeleteRequestBody'
            example:
              image_name: Tempore voluptate voluptas.
              volume_name: Sed quae ea.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
              example:
                cdrom: false
                path: Mollitia eius hic.
                volume: Nulla et cum.
  /storage/images/list:
    get:
      tags:
      - spin-registry
      summary: storage_images_list spin-registry
      description: list all images by volume
      operationId: spin-registry#storage_images_list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageImagesListRequestBody'
            example:
              volume_name: Ipsa enim non maxime est.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Molestiae quia eos.
                example:
                - Mollitia officiis officiis quia cum.
                - Non occaecati laboriosam dicta modi.
                - Dignissimos ullam sint fugit rem totam est.
              example:
              - Maxime distinctio odit et.
              - Rerum rerum alias quia.
  /storage/volumes/create:
    post:
      tags:
      - spin-registry
      summary: storage_volumes_create spin-registry
      description: create a new volume
      operationId: spin-registry#storage_volumes_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesCreateRequestBody'
            example:
              name: Molestiae asperiores.
              path: Temporibus explicabo sit ab quo et quis.
      responses:
        "200":
          description: OK response.
  /storage/volumes/delete:
    post:
      tags:
      - spin-registry
      summary: storage_volumes_delete spin-registry
      description: delete an existing volume
      operationId: spin-registry#storage_volumes_delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageVolumesDeleteRequestBody'
            example:
              name: Nulla numquam rerum asperiores corporis aut enim.
      responses:
        "200":
          description: OK response.
  /storage/volumes/list:
    get:
      tags:
      - spin-registry
      summary: storage_volumes_list spin-registry
      description: list all volumes
      operationId: spin-registry#storage_volumes_list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: object
                example:
                  Animi sunt suscipit.: Laudantium natus.
                  Et qui minima quo.: Et tenetur autem.
                  Maxime dolorum voluptatibus minus neque.: Omnis corporis.
                additionalProperties: true
              example:
                Mollitia autem tempora voluptatum et enim.: Rerum minima placeat.
                Ut consequatur velit labore quo adipisci et.: Beatae magni voluptas.
  /vm/create:
    post:
      tags:
      - spin-registry
      summary: vm_create spin-registry
      description: Create a VM
      operationId: spin-registry#vm_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatedVM'
            example:
              cpus: 4597833110689897909
              images:
              - cdrom: true
                path: Esse labore voluptas.
                volume: Iusto adipisci sapiente temporibus.
              - cdrom: true
                path: Esse labore voluptas.
                volume: Iusto adipisci sapiente temporibus.
              - cdrom: true
                path: Esse labore voluptas.
                volume: Iusto adipisci sapiente temporibus.
              memory: 1361587778145021448
              name: Aut minima recusandae et.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: integer
                example: 3671455876570299002
              example: 16927184423856213182
  /vm/delete/{id}:
    post:
      tags:
      - spin-registry
      summary: vm_delete spin-registry
      description: Delete a VM by ID
      operationId: spin-registry#vm_delete
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 4690550367995320877
        example: 4782986998848729098
      responses:
        "200":
          description: OK response.
  /vm/get/{id}:
    get:
      tags:
      - spin-registry
      summary: vm_get spin-registry
      description: Retrieve a VM by ID
      operationId: spin-registry#vm_get
      parameters:
      - name: id
        in: path
        description: ID of VM to remove
        required: true
        schema:
          type: integer
          description: ID of VM to remove
          example: 1464356265328326964
        example: 10000445856252574632
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdatedVM'
              example:
                cpus: 11176502060165847513
                images:
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                memory: 15107782813490131477
                name: Non nihil vitae nesciunt.
    post:
      tags:
      - spin-apiserver
      summary: vm_get spin-apiserver
      operationId: spin-apiserver#vm_get
      parameters:
      - name: id
        in: path
        description: ID of VM to retrieve
        required: true
        schema:
          type: integer
          description: ID of VM to retrieve
          example: 17706439943377571510
        example: 4030810032611975690
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdatedVM'
              example:
                cpus: 13829671816319811004
                images:
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                - cdrom: false
                  path: Vel vel illum voluptatem voluptatibus.
                  volume: Cum delectus occaecati enim in.
                memory: 18415181844935643869
                name: Amet quia quis omnis suscipit.
  /vm/list:
    get:
      tags:
      - spin-registry
      summary: vm_list spin-registry
      description: Retrieve all VM IDs
      operationId: spin-registry#vm_list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                  example: 5297025152754286228
                example:
                - 10056590563006842875
                - 15519826975036239795
                - 2362096617158076568
                - 13940614619936712309
              example:
              - 1902118019016072361
              - 18392423436501800193
              - 12338536359429078288
    post:
      tags:
      - spin-apiserver
      summary: vm_list spin-apiserver
      operationId: spin-apiserver#vm_list
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                  example: 5328435223035922268
                example:
                - 1920824715636185106
                - 16674491475849234238
              example:
              - 7140365851941338549
              - 12628926211734551938
  /vm/update/{id}:
    post:
      tags:
      - spin-registry
      summary: vm_update spin-registry
      description: Update a VM
      operationId: spin-registry#vm_update
      parameters:
      - name: id
        in: path
        description: ID of VM to update
        required: true
        schema:
          type: integer
          description: ID of VM to update
          example: 11959713165367391462
        example: 9740720920300614867
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VMUpdateRequestBody'
            example:
              vm:
                cpus: 6629117394574779493
                images:
                - cdrom: true
                  path: Esse labore voluptas.
                  volume: Iusto adipisci sapiente temporibus.
                - cdrom: true
                  path: Esse labore voluptas.
                  volume: Iusto adipisci sapiente temporibus.
                - cdrom: true
                  path: Esse labore voluptas.
                  volume: Iusto adipisci sapiente temporibus.
                memory: 2368394357671877291
                name: Magni voluptas corrupti et voluptatibus et.
      responses:
        "200":
          description: OK response.
components:
  schemas:
    AddRequestBody:
      type: object
      properties:
        action:
          type: string
          description: Action name
          example: Enim sequi soluta omnis.
        dependencies:
          type: array
          items:
            type: string
            example: Nisi placeat quasi consequatur ut sed.
          description: Dependency UUIDs
          example:
          - Ut modi sint quo.
          - Fugit facere.
          - Voluptas libero ea repudiandae.
        parameters:
          type: object
          description: Action parameters
          example:
            Alias vero non ut id aut dolores.: Mollitia est aliquam.
            Ex tempora fugit adipisci aliquid aliquam vel.: Sit earum harum aliquam nobis dicta.
            Optio quisquam dolores ut.: Quia nemo.
          additionalProperties: true
        resource:
          type: string
          description: Resource name
          example: Soluta necessitatibus voluptas quae autem.
      example:
        action: Veniam iusto sint.
        dependencies:
        - Neque eos aperiam nihil sunt doloremque.
        - Sint ut perspiciatis.
        - Quos maxime ut error facilis modi autem.
        parameters:
          Minima fugit.: Recusandae in voluptas laborum corrupti.
          Quis sed voluptas omnis.: Qui quibusdam odio est nulla eum.
          Recusandae unde sed.: Nihil error.
        resource: Ut ut optio nemo dolor doloremque similique.
      required:
      - resource
      - action
    CompleteRequestBody:
      type: object
      properties:
        id:
          type: string
          description: Command ID
          example: Consequatur eos aut laborum at.
        status:
          type: boolean
          description: status of work
          example: false
        status_reason:
          type: string
          description: reason of success/failure
          example: Voluptatem quos inventore aut ratione eaque perferendis.
      example:
        id: Quisquam odio.
        status: true
        status_reason: Ducimus ratione doloremque.
      required:
      - id
      - status
    Error:
      type: object
      properties:
        fault:
          type: boolean
          description: Is the error a server-side fault?
          example: false
        id:
          type: string
          description: ID is a unique identifier for this particular occurrence of the problem.
          example: 123abc
        message:
          type: string
          description: Message is a human-readable explanation specific to this occurrence of the problem.
          example: parameter 'p' must be an integer
        name:
          type: string
          description: Name is the name of this class of errors.
          example: bad_request
        temporary:
          type: boolean
          description: Is the error temporary?
          example: true
        timeout:
          type: boolean
          description: Is the error a timeout?
          example: true
      example:
        id: 3F1FKVRR
        message: Value of ID must be an integer
        name: bad_request
      required:
      - name
      - id
      - message
      - temporary
      - timeout
      - fault
    Image:
      type: object
      properties:
        cdrom:
          type: boolean
          description: Is this a cdrom image?
          example: false
        path:
          type: string
          description: Image path
          example: Est tempora et quidem dicta.
        volume:
          type: string
          description: Volume name
          example: Veniam rerum unde et impedit.
      example:
        cdrom: true
        path: Repellat quisquam atque debitis quos quisquam nobis.
        volume: Sit ullam aut culpa.
      required:
      - path
      - cdrom
    NextResponseBody:
      type: object
      properties:
        action:
          type: string
          description: action name
          example: Qui voluptate tempora fugit qui.
        parameters:
          type: object
          description: Action parameters
          example:
            Eius corporis occaecati aut adipisci.: Facere reprehenderit consequuntur inventore reiciendis tempora est.
          additionalProperties: true
        resource:
          type: string
          description: resource type
          example: Aut omnis reprehenderit dolorum.
        uuid:
          type: string
          description: Command ID
          example: Voluptas et omnis enim.
      example:
        action: Officiis officiis.
        parameters:
          Fugit in molestiae repellat cupiditate odit.: Veniam corrupti.
          Unde assumenda praesentium similique blanditiis eum nihil.: Optio voluptatem.
        resource: Ex vel ipsum autem et et.
        uuid: Et quia consequatur magnam officia.
      required:
      - uuid
      - resource
      - action
    StatusResponseBody:
      type: object
      properties:
        causer:
          type: string
          description: Failure causer as UUID (if any)
          example: Illo eos repudiandae et vel corporis.
        reason:
          type: string
          description: Failure reason (if any)
          example: Distinctio eveniet assumenda temporibus a.
        status:
          type: boolean
          description: Pass/Fail status
          example: true
      example:
        causer: Temporibus placeat odio ea.
        reason: Officiis accusamus rerum facilis architecto.
        status: false
      required:
      - status
    Storage:
      type: object
      properties:
        cdrom:
          type: boolean
          description: Is this image a cdrom?
          example: true
        image:
          type: string
          description: Image filename, no `/` characters
          example: Deserunt et dolorem quis dolores laborum ut.
        image_size:
          type: integer
          description: Image size (in gigabytes); required if image is not a cdrom
          example: 2637620970621584333
        volume:
          type: string
          description: Volume name; required if image is not a cdrom
          example: Enim architecto.
      example:
        cdrom: true
        image: Cupiditate voluptas sapiente ipsam qui omnis.
        image_size: 15612472867306530729
        volume: Aspernatur illo eligendi.
      required:
      - image
      - cdrom
    StorageImagesDeleteRequestBody:
      type: object
      properties:
        image_name:
          type: string
          description: name of image
          example: Quibusdam non neque magnam.
        volume_name:
          type: string
          description: name of volume
          example: Earum nisi sed.
      example:
        image_name: Veniam ut voluptatibus modi quo est.
        volume_name: Est ea.
      required:
      - volume_name
      - image_name
    StorageImagesListRequestBody:
      type: object
      properties:
        volume_name:
          type: string
          description: name of volume to list images for
          example: Officiis similique nostrum.
      example:
        volume_name: Pariatur cumque iusto sapiente.
      required:
      - volume_name
    StorageVolumesCreateRequestBody:
      type: object
      properties:
        name:
          type: string
          description: name of volume
          example: Adipisci in quia cum autem.
        path:
          type: string
          description: path to volume
          example: Voluptatem est molestiae accusamus aperiam.
      example:
        name: Voluptatem minima eos.
        path: Quia vitae facere ducimus esse quaerat.
      required:
      - name
      - path
    StorageVolumesDeleteRequestBody:
      type: object
      properties:
        name:
          type: string
          description: name of volume
          example: Repellendus et nostrum.
      example:
        name: A fuga mollitia id.
      required:
      - name
    UpdatedVM:
      type: object
      properties:
        cpus:
          type: integer
          description: CPU count
          example: 9760923142528330278
        images:
          type: array
          items:
            $ref: '#/components/schemas/Image'
          description: Image references
          example:
          - cdrom: false
            path: Vel vel illum voluptatem voluptatibus.
            volume: Cum delectus occaecati enim in.
          - cdrom: false
            path: Vel vel illum voluptatem voluptatibus.
            volume: Cum delectus occaecati enim in.
          - cdrom: false
            path: Vel vel illum voluptatem voluptatibus.
            volume: Cum delectus occaecati enim in.
        memory:
          type: integer
          description: Memory (in megabytes)
          example: 12166500671289702038
        name:
          type: string
          description: Name of VM; does not need to be unique
          example: Error dolores reprehenderit voluptatibus aliquam.
      example:
        cpus: 1705727486703064453
        images:
        - cdrom: false
          path: Vel vel illum voluptatem voluptatibus.
          volume: Cum delectus occaecati enim in.
        - cdrom: false
          path: Vel vel illum voluptatem voluptatibus.
          volume: Cum delectus occaecati enim in.
        memory: 9082481259630306931
        name: Asperiores sequi tempore.
      required:
      - name
      - cpus
      - memory
      - images
    VMCreateRequestBody:
      type: object
      properties:
        cpus:
          type: integer
          description: CPU count
          example: 4648633204157854795
        memory:
          type: integer
          description: Memory (in megabytes)
          example: 14910483328256100781
        name:
          type: string
          description: Name of VM; does not need to be unique
          example: Id a iusto id deleniti delectus.
        storage:
          type: array
          items:
            $ref: '#/components/schemas/Storage'
          description: Storage references
          example:
          - cdrom: true
            image: Provident sint.
            image_size: 867860291963136244
            volume: Recusandae eum repellat.
          - cdrom: true
            image: Provident sint.
            image_size: 867860291963136244
            volume: Recusandae eum repellat.
      example:
        cpus: 3188144197420854262
        memory: 8034194364622349194
        name: Et voluptatem deleniti distinctio rerum doloremque architecto.
        storage:
        - cdrom: true
          image: Provident sint.
          image_size: 867860291963136244
          volume: Recusandae eum repellat.
        - cdrom: true
          image: Provident sint.
          image_size: 867860291963136244
          volume: Recusandae eum repellat.
      required:
      - name
      - cpus
      - memory
      - storage
    VMUpdateRequestBody:
      type: object
      properties:
        vm:
          $ref: '#/components/schemas/UpdatedVM'
      example:
        vm:
          cpus: 6629117394574779493
          images:
          - cdrom: true
            path: Esse labore voluptas.
            volume: Iusto adipisci sapiente temporibus.
          - cdrom: true
            path: Esse labore voluptas.
            volume: Iusto adipisci sapiente temporibus.
          - cdrom: true
            path: Esse labore voluptas.
            volume: Iusto adipisci sapiente temporibus.
          memory: 2368394357671877291
          name: Magni voluptas corrupti et voluptatibus et.
      required:
      - vm
